"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8549],{11006:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var t=i(85893),l=i(11151);const o={},a="Building in Arch Linux",r={id:"development/Building-in-Arch-Linux",title:"Building in Arch Linux",description:"To build BetaFlight, first the ARM toolchain has to be installed:",source:"@site/docs/development/Building-in-Arch-Linux.md",sourceDirName:"development",slug:"/development/Building-in-Arch-Linux",permalink:"/docs/development/Building-in-Arch-Linux",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"Building Manual.",permalink:"/docs/development/Building-Manual"},next:{title:"Building in Eclipse",permalink:"/docs/development/Building-in-Eclipse"}},s={},c=[{value:"Setup GNU ARM Toolchain",id:"setup-gnu-arm-toolchain",level:2},{value:"Building",id:"building",level:2},{value:"Updating and rebuilding",id:"updating-and-rebuilding",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"building-in-arch-linux",children:"Building in Arch Linux"}),"\n",(0,t.jsx)(n.p,{children:"To build BetaFlight, first the ARM toolchain has to be installed:"}),"\n",(0,t.jsx)(n.h2,{id:"setup-gnu-arm-toolchain",children:"Setup GNU ARM Toolchain"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pacman -S arm-none-eabi-gcc arm-none-eabi-newlib arm-none-eabi-binutils\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For running tests, the ",(0,t.jsx)(n.code,{children:"libblocksruntime"})," package from the AUR also has to be installed:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"trizen -S libblocksruntime\n"})}),"\n",(0,t.jsxs)(n.p,{children:["At the time of writing, the repository version of GCC is 9.2.0, unlike 9.2.1 which BetaFlight expects.\nIf you get the following error, you can override the GCC version in ",(0,t.jsx)(n.code,{children:"make/locak.mk"})," before proceeding:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ make\nmake/tools.mk:301: *** **ERROR** your arm-none-eabi-gcc is '9.2.0', but '9.2.1' is expected. Override with 'GCC_REQUIRED_VERSION' in make/local.mk or run 'make arm_sdk_install' to install the right version automatically in the tools folder of this repo.  Stop.\n$ echo \"GCC_REQUIRED_VERSION = 9.2.0\" >> make/local.mk\n"})}),"\n",(0,t.jsx)(n.h2,{id:"building",children:"Building"}),"\n",(0,t.jsx)(n.p,{children:"After the ARM toolchain is installed, you should be able to build from source."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd src\ngit clone git@github.com:betaflight/betaflight.git\ncd betaflight\nmake configs\nmake MATEKF411\n"})}),"\n",(0,t.jsx)(n.p,{children:"You'll see a set of files being compiled, and finally linked, yielding both an ELF and then a HEX:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"...\n$ ls -l obj/\ntotal 1516\n-rwxr-xr-x 1 s-ol s-ol  428584 Jan 11 12:04 betaflight_4.4.2_MATEKF411.bin*\n-rw-r--r-- 1 s-ol s-ol 1136991 Jan 11 12:04 betaflight_4.4.2_MATEKF411.hex\ndrwxr-xr-x 3 s-ol s-ol    4096 Jan 11 12:04 main/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can use the Betaflight-Configurator to flash the ",(0,t.jsx)(n.code,{children:"obj/betaflight_4.4.2_MATEKF411.hex"})," file."]}),"\n",(0,t.jsx)(n.h2,{id:"updating-and-rebuilding",children:"Updating and rebuilding"}),"\n",(0,t.jsx)(n.p,{children:"Navigate to the local betaflight repository and use the following steps to pull the latest changes and rebuild your version of betaflight:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd src/betaflight\ngit reset --hard\ngit pull\nmake clean\nmake\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>a});var t=i(67294);const l={},o=t.createContext(l);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);