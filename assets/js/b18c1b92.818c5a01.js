"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9767],{43666:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>a,toc:()=>h});var n=i(85893),r=i(11151);const s={},o="Unified Targets for 4.2",a={id:"wiki/guides/archive/Unified-Targets",title:"Unified Targets for 4.2",description:"instructions",source:"@site/docs/wiki/guides/archive/Unified-Targets.md",sourceDirName:"wiki/guides/archive",slug:"/wiki/guides/archive/Unified-Targets",permalink:"/docs/wiki/guides/archive/Unified-Targets",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"wiki",previous:{title:"Spektrum and RC Smooting Filter",permalink:"/docs/wiki/guides/archive/Spektrum-and-RC-Smoothing-Filter"},next:{title:"Failsafe notes (Old)",permalink:"/docs/wiki/guides/archive/failsafe-old"}},c={},h=[{value:"instructions",id:"instructions",level:2},{value:"1. Determine the target to use.",id:"1-determine-the-target-to-use",level:3},{value:"2. Choose your target",id:"2-choose-your-target",level:3},{value:"3. <code>Load Firmware [Online]</code> then <code>Flash Firmware</code>",id:"3-load-firmware-online-then-flash-firmware",level:3},{value:"4. Connect to configurator, click on <code>Apply Custom Defaults</code> when prompted:",id:"4-connect-to-configurator-click-on-apply-custom-defaults-when-prompted",level:3},{value:"Working on firmware",id:"working-on-firmware",level:2},{value:"Combine and flash with the configurator",id:"combine-and-flash-with-the-configurator",level:3},{value:"make_config_hex.sh",id:"make_config_hexsh",level:3}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"unified-targets-for-42",children:"Unified Targets for 4.2"}),"\n",(0,n.jsx)(t.h2,{id:"instructions",children:"instructions"}),"\n",(0,n.jsx)(t.h3,{id:"1-determine-the-target-to-use",children:"1. Determine the target to use."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Image that shows where to find the target name",src:i(48155).Z+"",width:"590",height:"207"})}),"\n",(0,n.jsx)(t.p,{children:"The CLI is another method to get the target name."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"# version\n# Betaflight / STM32F411 (S411) 4.2.0 Jun 14 2020 / 03:04:43 (8f2d21460) MSP API: 1.43\n# config: manufacturer_id: MTKS, board_name: MATEKF411, version: be0c9205, date: 2020-01-15T19:44:32Z\n# board: manufacturer_id: MTKS, board_name: MATEKF411\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The MCU target is ",(0,n.jsx)(t.code,{children:"STM32F411"})," and unified target config is ",(0,n.jsx)(t.code,{children:"MATEKF411"})," as the board_name describes the board type config.\nThe manufacturer is required to maintain a unified target configuration file."]}),"\n",(0,n.jsx)(t.h3,{id:"2-choose-your-target",children:"2. Choose your target"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"MATEKF411 <-- Unified target\n"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"After you hit load firmware on the Firmware Flasher tab you will get the following release info:"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"Target: MATEKF411\nManufacturer ID: MTKS\nVersion: 4.2.0\nBinary: betaflight_4.2.0_STM32F411.hex\nDate: 14-06-2020 08:40\nUnified Target: MTKS-MATEKF411.config\nDate: 2020-01-15T19:44:32Z\n"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"FAQ"}),":\nWhat is Manufacturer ID: ",(0,n.jsx)(t.code,{children:"MTKS"}),"\nWhat do these four letters mean? They refer to the manufacturer of the board. The list is available in ",(0,n.jsx)(t.a,{href:"https://github.com/betaflight/unified-targets/blob/master/Manufacturers",children:"Manufacterers.md"})]}),"\n",(0,n.jsxs)(t.p,{children:["Tip: remember to save a backup of your config, like as a ",(0,n.jsx)(t.code,{children:"diff"}),", ",(0,n.jsx)(t.em,{children:"before"})," you flash a new version of betaflight.\n",(0,n.jsx)(t.strong,{children:"Please note"})," it is only save to import certain settings back. If unsure please start with a fresh configuration."]}),"\n",(0,n.jsxs)(t.h3,{id:"3-load-firmware-online-then-flash-firmware",children:["3. ",(0,n.jsx)(t.code,{children:"Load Firmware [Online]"})," then ",(0,n.jsx)(t.code,{children:"Flash Firmware"})]}),"\n",(0,n.jsxs)(t.h3,{id:"4-connect-to-configurator-click-on-apply-custom-defaults-when-prompted",children:["4. Connect to configurator, click on ",(0,n.jsx)(t.code,{children:"Apply Custom Defaults"})," when prompted:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Picture of a notice that asks the user to apply custom defaults",src:i(9954).Z+"",width:"538",height:"159"})}),"\n",(0,n.jsxs)(t.p,{children:["If you are having an issue with the unified target, try the legacy target for now, and file an issue on the ",(0,n.jsx)(t.a,{href:"https://github.com/betaflight/betaflight/issues",children:"Issue Tracker"})," if the unified target is missing anything that it should have."]}),"\n",(0,n.jsx)(t.p,{children:"Todo: which target for example?, also needs some images."}),"\n",(0,n.jsx)(t.h1,{id:"tips-for-working-with-unified-targets",children:"Tips for working with Unified targets"}),"\n",(0,n.jsx)(t.h2,{id:"working-on-firmware",children:"Working on firmware"}),"\n",(0,n.jsxs)(t.p,{children:["Save a copy of the unified target to your computer from ",(0,n.jsx)(t.a,{href:"https://github.com/betaflight/unified-targets/tree/master/configs/default",children:"the repository"}),", lets use ",(0,n.jsx)(t.code,{children:"MTKS-MATEKF411.config"})," as an example."]}),"\n",(0,n.jsx)(t.p,{children:"Open up the file in a text editor and take a look at the first line."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["# Betaflight / ",(0,n.jsx)(t.strong,{children:"STM32F411"})," (S411) 4.1.0 Jun 25 2019 / 10:27:57 (2a6e94d03) MSP API: 1.42"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["In this case, ",(0,n.jsx)(t.code,{children:"STM32F411"})," is the processor target used, so when you compile a target you'll want to use ",(0,n.jsx)(t.code,{children:"make TARGET=STM32F411"})]}),"\n",(0,n.jsx)(t.h3,{id:"combine-and-flash-with-the-configurator",children:"Combine and flash with the configurator"}),"\n",(0,n.jsxs)(t.p,{children:["In the configurator load the ",(0,n.jsx)(t.code,{children:".config"})," file first, and then load the ",(0,n.jsx)(t.code,{children:"betaflight_4.x.x_STM32F411.hex"}),", now flash the firmware. On the first connect you will be prompted to ",(0,n.jsx)(t.code,{children:"Apply Custom Defaults"})," just like the regular flashing procedure"]}),"\n",(0,n.jsx)(t.h3,{id:"make_config_hexsh",children:"make_config_hex.sh"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"make_config_hex.sh"})," is a script in ",(0,n.jsx)(t.code,{children:"src/utils"})," that can be used to combine a unified target configuration with a firmware image. The combined .hex may be useful to share with other users of the same flight controller. Users of the combined .hex will be prompted to ",(0,n.jsx)(t.code,{children:"Apply Custom Defaults"}),", just like the regular flashing procedure."]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"srec_cat"})," program is part of ",(0,n.jsx)(t.a,{href:"http://srecord.sourceforge.net/",children:"srecord"}),", which is available in ubuntu under universe. ",(0,n.jsx)(t.code,{children:"apt install srecord"})]}),"\n",(0,n.jsxs)(t.p,{children:["Windows binaries to not seem available, but they do have ",(0,n.jsx)(t.a,{href:"http://srecord.sourceforge.net/windows.html",children:"instructions"})]}),"\n",(0,n.jsxs)(t.p,{children:["Take a look at ",(0,n.jsx)(t.a,{href:"https://github.com/betaflight/betaflight/blob/master/src/utils/make_config_hex.sh",children:"src/utils/make_config_hex.sh"})," for more information."]})]})}function l(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},9954:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/apply_custom_defaults_prompt-b5f2736d37fd1769a5ec0e6f64bd0698.png"},48155:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/identify_target-a16613c3ed00e280adf49336c3648665.png"},11151:(e,t,i)=>{i.d(t,{Z:()=>a,a:()=>o});var n=i(67294);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);