"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9184],{94981:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>d,toc:()=>h});var n=r(85893),t=r(11151);const s={},i="MotoLab",d={id:"wiki/boards/MOTOLAB",title:"MotoLab",description:"The MOTOLAB build target supports the STM32F3-based boards provided by MotoLab.",source:"@site/docs/wiki/boards/MOTOLAB.md",sourceDirName:"wiki/boards",slug:"/wiki/boards/MOTOLAB",permalink:"/docs/wiki/boards/MOTOLAB",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"wiki",previous:{title:"MotoLab Typhoon F4 Flight Controller and VTX",permalink:"/docs/wiki/boards/MLTYPHF4"},next:{title:"MultiFlite PICO-B-FC",permalink:"/docs/wiki/boards/MULTIFLITEPICO"}},l={},h=[{value:"CONTENT FROM SAME FILE IN OTHER FOLDER",id:"content-from-same-file-in-other-folder",level:2},{value:"Description",id:"description",level:2},{value:"MCU, Sensors and Features",id:"mcu-sensors-and-features",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Features",id:"features",level:3},{value:"Manufacturers and Distributors",id:"manufacturers-and-distributors",level:2},{value:"Designers",id:"designers",level:2},{value:"Maintainers",id:"maintainers",level:2},{value:"Similar Targets",id:"similar-targets",level:2},{value:"Variants",id:"variants",level:2},{value:"FAQ &amp; Known Issues",id:"faq--known-issues",level:2},{value:"Servo_tilt with DSHOT on BF3.1:",id:"servo_tilt-with-dshot-on-bf31",level:3},{value:"Tri-copter with Dshot ESCs on BF3.1:",id:"tri-copter-with-dshot-escs-on-bf31",level:3},{value:"Hex-copter with Dshot ESCs on BF3.1:",id:"hex-copter-with-dshot-escs-on-bf31",level:3},{value:"Other Resources",id:"other-resources",level:2},{value:"Image",id:"image",level:2}];function a(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"motolab",children:"MotoLab"}),"\n",(0,n.jsx)(o.p,{children:"The MOTOLAB build target supports the STM32F3-based boards provided by MotoLab."}),"\n",(0,n.jsx)(o.p,{children:"At present this includes the TornadoFC, CycloneFC and MotoF3."}),"\n",(0,n.jsx)(o.p,{children:"The CycloneFC and TornadoFC are described here:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.a,{href:"http://www.rcgroups.com/forums/showpost.php?p=32330479&postcount=2",children:"http://www.rcgroups.com/forums/showpost.php?p=32330479&postcount=2"})}),"\n",(0,n.jsx)(o.p,{children:"The MotoF3 is described here:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.a,{href:"http://www.rcgroups.com/forums/showpost.php?p=28508139&postcount=3",children:"http://www.rcgroups.com/forums/showpost.php?p=28508139&postcount=3"})}),"\n",(0,n.jsx)(o.p,{children:"All boards use the STM32F303 microcontroller and have the following features:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"256K bytes of flash memory"}),"\n",(0,n.jsx)(o.li,{children:"Floating point math coprocessor"}),"\n",(0,n.jsx)(o.li,{children:"Three hardware serial port UARTs"}),"\n",(0,n.jsx)(o.li,{children:"USB using the built-in USB phy that does not interfere with any hardware UART"}),"\n",(0,n.jsx)(o.li,{children:"Stable voltage regulation"}),"\n",(0,n.jsx)(o.li,{children:"High-voltage/high-current buzzer/LED output"}),"\n",(0,n.jsx)(o.li,{children:"Serial LED interface"}),"\n",(0,n.jsx)(o.li,{children:"Low-pass filtered VBAT input with 1/10 divider ratio"}),"\n",(0,n.jsx)(o.li,{children:"Low-pass filtered PWM or analog RSSI input"}),"\n",(0,n.jsx)(o.li,{children:"8 short-circuit protected PWM outputs, with 5V buffering on the TornadoFC"}),"\n",(0,n.jsx)(o.li,{children:"On-board 4S-compatible switching regulator (CycloneFC and MotoF3)"}),"\n",(0,n.jsx)(o.li,{children:"Direct mounting option for a Pololu switching regulator for up to 6S lipo operation (TornadoFC)"}),"\n",(0,n.jsx)(o.li,{children:"Pass-through programming and configuration of BLHeli-based ESCs using Cleanflight Configurator"}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:"The MotoF3 also provides built-in power distribution for four ESCs, an on-board buzzer, and 2Mbyte SPI flash for data logging."}),"\n",(0,n.jsx)(o.h1,{id:"flashing",children:"Flashing"}),"\n",(0,n.jsx)(o.p,{children:"MotoLab boards all use the built-in USB interface on the STM32F3 microcontroller. New versions of Cleanflight can be installed using Cleanflight Configurator through the USB interface. Installation of new firmware is described here:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.a,{href:"/docs/development/USB-Flashing",children:"USB Flashing"})}),"\n",(0,n.jsx)(o.p,{children:"Firmware installation using Windows operating system is complicated because the default device driver for the STM32 USB interface in DFU programming mode is not compatible with the Configurator flash tool. The required DFU mode driver must be manually installed. The default driver for the USB port in normal (VCP) mode is also required for connection to Configurator. Additional details on the drivers and their installion is provided here:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.a,{href:"http://www.rcgroups.com/forums/showthread.php?t=2537379",children:"http://www.rcgroups.com/forums/showthread.php?t=2537379"})}),"\n",(0,n.jsx)(o.h2,{id:"content-from-same-file-in-other-folder",children:"CONTENT FROM SAME FILE IN OTHER FOLDER"}),"\n",(0,n.jsx)(o.h2,{id:"description",children:"Description"}),"\n",(0,n.jsx)(o.p,{children:"Four FCs that all use the same Target HEX"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"MotoF3 - Board shape designed for the ImpulseRC Warp Quads as part of the frame."}),"\n",(0,n.jsx)(o.li,{children:"Tornado - Does not allow BLHeli Pass-through due to have 5V uni-directional drivers on the motor output pins.\nRequires a Pololu 5V regulator mounted on the board."}),"\n",(0,n.jsx)(o.li,{children:"Cyclone - Like the Tornado but supports BLHeli pass-through and has the 5V regulator built onto the board."}),"\n",(0,n.jsx)(o.li,{children:"Tempest (F3 version) - Has PDB built into the board as well as a 5V regulator to power accessories."}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"mcu-sensors-and-features",children:"MCU, Sensors and Features"}),"\n",(0,n.jsx)(o.h3,{id:"hardware",children:"Hardware"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"MCU: STM32F3"}),"\n",(0,n.jsx)(o.li,{children:"IMU: MPU6000, SPI (Cyclone, Tempest)\n: MPU6050, IIC (MotoF3, Tornado)"}),"\n",(0,n.jsx)(o.li,{children:"IMU Interrupt:"}),"\n",(0,n.jsx)(o.li,{children:"BARO: No"}),"\n",(0,n.jsx)(o.li,{children:"VCP: Yes"}),"\n",(0,n.jsx)(o.li,{children:"Hardware UARTS: 3"}),"\n",(0,n.jsx)(o.li,{children:"OSD: No"}),"\n",(0,n.jsx)(o.li,{children:"Blackbox: Serial"}),"\n",(0,n.jsx)(o.li,{children:"PPM/UART Shared: UART2"}),"\n",(0,n.jsx)(o.li,{children:"Battery Voltage Sensor: Yes"}),"\n",(0,n.jsx)(o.li,{children:"Integrated Voltage Regulator: Yes (MotoF3, Cyclone, Tempest)\n: Pololu 5V (Tornado)"}),"\n",(0,n.jsx)(o.li,{children:"Brushed Motor Mosfets: No"}),"\n",(0,n.jsx)(o.li,{children:"Buttons: None. Solder BOOT pads"}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"features",children:"Features"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.em,{children:"(add list of features)"})}),"\n",(0,n.jsx)(o.h2,{id:"manufacturers-and-distributors",children:"Manufacturers and Distributors"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.em,{children:"(add links to Manufacturers and Distributors)"})}),"\n",(0,n.jsx)(o.h2,{id:"designers",children:"Designers"}),"\n",(0,n.jsx)(o.h2,{id:"maintainers",children:"Maintainers"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.em,{children:"(add your name here if you help test or contribute code for this board)"})}),"\n",(0,n.jsx)(o.h2,{id:"similar-targets",children:"Similar Targets"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.em,{children:"(add links board descriptions here that are similar in features or function, but have a separate target)"})}),"\n",(0,n.jsx)(o.h2,{id:"variants",children:"Variants"}),"\n",(0,n.jsx)(o.p,{children:"Differences:"}),"\n",(0,n.jsx)(o.h2,{id:"faq--known-issues",children:"FAQ & Known Issues"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"The BF developers removed flash support from the MotoLab target in 3.1.x. The other MotoLab boards use the same target but don't have flash, so apparently they overlooked the MotoF3 and thought the flash code wasn't needed."}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"To use DSHOT ESC protocol with \xdfF3.1 Motor1 needs to be re-mapped to the PPM pin."}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"Tornado has output driver chips so can not add a wire to the output pin header to use DSHOT. So just wire Motor #1's ESC directly to the PPM pin and re-map."}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"The Cyclone and Tempest boards can have the PPM pin wired to the motor #1 output pin."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.p,{children:["See the ",(0,n.jsx)(o.a,{href:"/docs/wiki/guides/archive/DSHOT-ESC-Protocol-3-1",children:"DSHOT & Betaflight"})," page."]}),"\n",(0,n.jsx)(o.p,{children:"For Cyclone & Tempest -\nA wire can be soldered from the PPM pin to the motor 1 header pin or just connect ESC#1 directly to the PPM pin.\nNote: Adding this wire is not required if you connect signal wire from ESC #1 directly to the PPM pin.\nMove motor 1 from Output #1 header pin to the PPM input header pin."}),"\n",(0,n.jsxs)(o.p,{children:["Follow above and to re-map output type in CLI:\n",(0,n.jsx)(o.code,{children:"resource ppm none  "}),"\n",(0,n.jsx)(o.code,{children:"resource motor 1 A07 "}),"\n",(0,n.jsx)(o.code,{children:"save  "})]}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["Photo of wire added to a Cyclone.\n",(0,n.jsx)(o.a,{href:"https://www.rcgroups.com/forums/showpost.php?p=36589146&postcount=2787",children:"https://www.rcgroups.com/forums/showpost.php?p=36589146&postcount=2787"})]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:"Photo and post on modifying the MotorF3 (Warp Quad) board to use Dshot. Note this is an alternet method that wires the PPM to Motor #7 output since the #7 output is very close to the PPM pin."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.p,{children:["The CLI re-mapping is:\n",(0,n.jsx)(o.code,{children:"resource motor 7 none "}),"\n",(0,n.jsx)(o.code,{children:"resource ppm none "}),"\n",(0,n.jsx)(o.code,{children:"resource motor 1 A07 "}),"\n",(0,n.jsx)(o.code,{children:"save "}),"\n",(0,n.jsx)(o.a,{href:"https://www.rcgroups.com/forums/showthread.php?2537379-MotoLab-Board-Setup-and-Troubleshooting/page197#post37314713",children:"https://www.rcgroups.com/forums/showthread.php?2537379-MotoLab-Board-Setup-and-Troubleshooting/page197#post37314713"})]}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["Report that with the Mod and remapping to run DSHOT there is a conflict with DMA for LEDs with Motor #4.\nCurrently LEDs need to be disabled to run DSHOT.\nctzsnooze reported a fix:\nThe solution, for versions of betaflight before 3.3, is to solder the ESC signal wire for motor 4 to the motor 5 pad, and in the CLI save:\n",(0,n.jsx)(o.code,{children:"resource MOTOR 4 A01"}),"\n",(0,n.jsx)(o.code,{children:"resource MOTOR 5 NONE"})]}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"servo_tilt-with-dshot-on-bf31",children:"Servo_tilt with DSHOT on BF3.1:"}),"\n",(0,n.jsx)(o.p,{children:"Do mod and setup for DSHOT as above.\nOutputs 7 & 8 on the Cyclone (Tornado & Tempest) have timers available for servos (Outputs 5 & 6 might also be available but not tested).\nIn CLI type:"}),"\n",(0,n.jsxs)(o.p,{children:[(0,n.jsx)(o.code,{children:"resource motor 7 none"}),"\n",(0,n.jsx)(o.code,{children:"resource motor 8 none"}),"\n",(0,n.jsx)(o.code,{children:"resource servo 1 A03"}),"\n",(0,n.jsx)(o.code,{children:"resource servo 2 A08"}),"\n",(0,n.jsx)(o.code,{children:"save"})]}),"\n",(0,n.jsx)(o.p,{children:"Reconnect USB and reopen configurator.\nOn Config Tab Enable 'Servo_tilt' and click \"SAVE and REBOOT\".\nOn Servo Tab check CH1 (Roll) for Servo 0 (servo 0 here is Servo 1 in CLI) and check CH2 (Pitch) for Servo 1.\nClick Save. Outputs 7 & 8 should now be 1000 to 2000usec servo pulses. Use the Motors Tab to check or an O'scope on the output pins. Adjust the MIN & MAX to get the movement desired."}),"\n",(0,n.jsx)(o.h3,{id:"tri-copter-with-dshot-escs-on-bf31",children:"Tri-copter with Dshot ESCs on BF3.1:"}),"\n",(0,n.jsx)(o.p,{children:"Must add wire from PPM to output1 for Dshot.\nServo must be on output 5 or 6 (Timer restriction: see SERVO_TILT wiki page). Do NOT enable SERVO_TILT, selecting TRICOPTER directs Yaw stick to Servo 1.\nRe-map motor 5 to Servo 1 with the following CLI commands (servo on output 5):"}),"\n",(0,n.jsxs)(o.p,{children:[(0,n.jsx)(o.code,{children:"resource MOTOR 5 none  "}),"\n",(0,n.jsx)(o.code,{children:"resource servo 1 A01  "}),"\n",(0,n.jsx)(o.code,{children:"save  "})]}),"\n",(0,n.jsx)(o.h3,{id:"hex-copter-with-dshot-escs-on-bf31",children:"Hex-copter with Dshot ESCs on BF3.1:"}),"\n",(0,n.jsx)(o.p,{children:"This did not seem to work. No DSHOT output on motor 1 (No DMA assignment) and bad output on motor 6."}),"\n",(0,n.jsx)(o.h2,{id:"other-resources",children:"Other Resources"}),"\n",(0,n.jsx)(o.p,{children:"Setup Guides:"}),"\n",(0,n.jsxs)(o.p,{children:["Tornado and Cyclone\n",(0,n.jsx)(o.a,{href:"https://www.rcgroups.com/forums/showthread.php?t=2537379",children:"https://www.rcgroups.com/forums/showthread.php?t=2537379"})]}),"\n",(0,n.jsxs)(o.p,{children:["Tempest\n",(0,n.jsx)(o.a,{href:"https://www.rcgroups.com/forums/showthread.php?t=2715556",children:"https://www.rcgroups.com/forums/showthread.php?t=2715556"})]}),"\n",(0,n.jsx)(o.h2,{id:"image",children:"Image"})]})}function c(e={}){const{wrapper:o}={...(0,t.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},11151:(e,o,r)=>{r.d(o,{Z:()=>d,a:()=>i});var n=r(67294);const t={},s=n.createContext(t);function i(e){const o=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(s.Provider,{value:o},e.children)}}}]);