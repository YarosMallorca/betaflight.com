"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3747],{47137:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>h});var t=n(85893),r=n(11151);const i={},o="Betaflight 2.x CLI commands",a={id:"wiki/guides/archive/Betaflight-2-x-CLI-commands",title:"Betaflight 2.x CLI commands",description:"These settings are specific to betaflight 2.x. For cleanflight CLI docs go here",source:"@site/docs/wiki/guides/archive/Betaflight-2-x-CLI-commands.md",sourceDirName:"wiki/guides/archive",slug:"/wiki/guides/archive/Betaflight-2-x-CLI-commands",permalink:"/docs/wiki/guides/archive/Betaflight-2-x-CLI-commands",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"wiki",previous:{title:"Archive",permalink:"/docs/category/archive"},next:{title:"Official Betaflight T-Shirts and Hoodies!",permalink:"/docs/wiki/guides/archive/Betaflight-Merchandise"}},l={},h=[];function d(e){const s={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"betaflight-2x-cli-commands",children:"Betaflight 2.x CLI commands"}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.p,{children:["These settings are specific to betaflight 2.x. For cleanflight CLI docs go here\n",(0,t.jsx)(s.a,{href:"https://github.com/cleanflight/cleanflight/blob/master/docs/Cli.md",children:"https://github.com/cleanflight/cleanflight/blob/master/docs/Cli.md"})]})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("h4",{children:"Note: This Wiki Page covers the CLI Command changes for BetaFlight Version 2.x. "}),(0,t.jsx)(s.br,{}),"\n","New ",(0,t.jsx)(s.a,{href:"https://github.com/martinbudden/betaflight/tree/master/docs",children:"Docs"})," for BetaFlight 2.x."]}),"\n",(0,t.jsxs)(s.p,{children:["Follow these links for the new CLI commands for ",(0,t.jsx)(s.a,{href:"/docs/wiki/release/older/Betaflight-3-0-Release-Notes",children:"BetaFlight 3.0.x"})," and ",(0,t.jsx)(s.a,{href:"/docs/wiki/release/older/Betaflight-3-1-Release-Notes",children:"BetaFlight 3.1.x"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"The setting shown are the Defaults + possible values."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("h3",{children:"GET command"}),'\nNew CLI feature is type a "get" and part of a CLI command name (example: "get acc"). The cli will return all CLI commands that have the name part with the current value plus what the valid value range or valid Names.\nUnknown on which Version this was added but is in v2.6.1',(0,t.jsx)(s.br,{}),"\n","This is a very handy feature and allows easy to find variable names that can then be copy/pasted from the CLI display to the command line entry box."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"set roll_yaw_cam_mix_degrees = 0"}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0..50]"}),(0,t.jsx)("br",{}),"\nNeed feedback about proof of concept feature for mixing of roll and yaw to FPV cam angle. ",(0,t.jsx)(s.code,{children:"set roll_yaw_cam_mix_degrees = <degrees>"})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["Here a good preview for this option: [",(0,t.jsx)(s.a,{href:"https://youtu.be/gXeaINFpvow",children:"https://youtu.be/gXeaINFpvow"})," FPV camera tilt compensation]"]}),"\n",(0,t.jsxs)(s.p,{children:["Another video on this option: [",(0,t.jsx)(s.a,{href:"https://www.youtube.com/watch?v=gEcWxHIH378",children:"https://www.youtube.com/watch?v=gEcWxHIH378"})," Betaflight Camera Uptilt Compensation]"]}),"\n",(0,t.jsx)(s.p,{children:"Note that in newer BF versions, you need to enable a flight mode for 'FPV ANGLE MIX' on the modes tab to make the mixing work. You can either define a switch to switch FPV cam angle mixing on and off OR you can set the full range of any switch to keep it permanently on."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"set gyro_lpf = 188HZ"})," ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,188HZ,98HZ,42HZ,EXPERIMENTAL(2.5.0)]"})," See [[Gyro & Dterm filtering recommendations]] for more information."]}),"\n",(0,t.jsx)(s.p,{children:"This is the internal gyro filtering value. The lower the value the more buffering and delay will be introduced to gyro. Must be set to OFF to enable 2K mode (starting with Version 2.3.0)(starting with Version 2.4 this is automatically set to OFF if 500 looptime is selected in the GUI)''"}),"\n",(0,t.jsx)(s.p,{children:"(F1 boards must disable accelerometer with set acc_hardware = 1 and in case there are other sensors on board like baro and mag disable those too. set mag_hardware = 1 and set baro_hardware = 1) Disabling any level modes\nHardware lowpass filter for gyro. Allowed values depend on the driver - For example MPU6050 allows 5,10,20,42,98,188,256Hz, while MPU3050 doesn't allow 5Hz. If you have to set gyro lpf below 42Hz generally means the frame is vibrating too much, and that should be fixed first. Values outside of supported range will usually be ignored by drivers, and will configure lpf to default value of 42Hz."}),"\n",(0,t.jsx)(s.p,{children:"Boris said:"}),"\n",(0,t.jsx)(s.p,{children:"gyro_lpf = OFF basically still means there is a little bit of filtering on the gyro.\nWhen setting it to EXPERIMENTAL it will remove any possible filtering and give raw data, which is extremely noisy. I don't recommend it. I just added it to be there in case someone wants to play with it."}),"\n",(0,t.jsx)(s.p,{children:"For V2.4.0 and above- see the set gyro_sync_denom CLI command below."}),"\n",(0,t.jsx)(s.p,{children:"(starting with Version 2.4 the following hardware is automatically set to NONE on F1 boards if 500usec looptime is selected in the GUI)"}),"\n",(0,t.jsxs)(s.p,{children:["set acc_hardware = 0 (default on) (must be set to 1 for 2K mode on F1 targets)",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,9] (from 2.4.0 [AUTO,NONE,...])"}),(0,t.jsx)("br",{}),"\nSets the accelerometer 0 means auto detect, 1 means NONE, 2 for ADXL345, 3 for MPU6050 integrated accelerometer, 4 for MMA8452, 5 for BMA280, 6 for LSM303DLHC, 7 for MPU6000, 8 for MPU6500"]}),"\n",(0,t.jsxs)(s.p,{children:["NB - There's an issue with configurator that means the gyro icon goes dark when you disable the accelerometer - it's here: ",(0,t.jsx)(s.a,{href:"https://github.com/cleanflight/cleanflight-configurator/issues/313",children:"https://github.com/cleanflight/cleanflight-configurator/issues/313"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"set baro_hardware = 0"})," (default on), 1 = disabled",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,3] (from 2.4.0 [AUTO,NONE,...])"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"set mag_hardware = 0"})," (default on), 1 = disabled",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,3] (from 2.4.0 [AUTO,NONE,...])"})]}),"\n",(0,t.jsxs)(s.p,{children:["set imu_dcm_kp = 2500",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,50000]"})]}),"\n",(0,t.jsxs)(s.p,{children:["set imu_dcm_ki = 0",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,50000]"})]}),"\n",(0,t.jsxs)(s.p,{children:["set enable_buzzer_p6 = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),"\nEnables a lost buzzer on ESC Port 6 (CC3D only)"]}),"\n",(0,t.jsxs)(s.p,{children:["set beeper_off_flags = 256",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,65535]"})]}),"\n",(0,t.jsx)(s.p,{children:"beeper_off_flags = sum of each desired beeper turned off"}),"\n",(0,t.jsxs)(s.p,{children:["BEEPER",(0,t.jsx)(s.em,{children:"GYRO_CALIBRATED, 1\nBEEPER_RX_LOST_LANDING, 2 // Beeps SOS when armed and TX is turned off or signal lost (autolanding/autodisarm)\nBEEPER_RX_LOST, 4 // Beeps when TX is turned off or signal lost (repeat until TX is okay)\nBEEPER_DISARMING, 8 // Beep when disarming the board\nBEEPER_ARMING, 16 // Beep when arming the board\nBEEPER_ARMING_GPS_FIX, 32 // Beep a special tone when arming the board and GPS has fix\nBEEPER_BAT_CRIT_LOW, 64 // Longer warning beeps when battery is critically low (repeats)\nBEEPER_BAT_LOW, 128 // Warning beeps when battery is getting low (repeats)\nBEEPER"}),", 256 // when plugged into USB\nBEEPER_RX_SET, 512 // Beeps when aux channel is set for beep or beep sequence how many satellites has found if GPS enabled\nBEEPER_DISARM_REPEAT, 1024 // Beeps sounded while stick held in disarm position\nBEEPER_ACC_CALIBRATION, 2048 // ACC inflight calibration completed confirmation\nBEEPER_ACC_CALIBRATION_FAIL, 4096 // ACC inflight calibration failed\nBEEPER_READY_BEEP, 8192 // Ring a tone when GPS is locked and ready\nBEEPER_MULTI_BEEPS, 16384 // Internal value used by 'beeperConfirmationBeeps()'.\nBEEPER_ARMED, 32768 // Warning beeps when board is armed (repeats until board is disarmed or throttle is increased)"]}),"\n",(0,t.jsx)("u",{children:"New in V2.5.0 Final"}),"\n",(0,t.jsx)(s.p,{children:"The beeper off flags command is replaced by new textual representation using beeper command.\nExamples:\nTo disable all beeper scenarios:"}),"\n",(0,t.jsx)(s.h1,{id:"beeper--all",children:"beeper -ALL"}),"\n",(0,t.jsx)(s.p,{children:"To enable all beeper scenarios:"}),"\n",(0,t.jsx)(s.h1,{id:"beeper-all",children:"beeper ALL"}),"\n",(0,t.jsx)(s.p,{children:"To disable beeping while USB is connected:"}),"\n",(0,t.jsx)(s.h1,{id:"beeper--on_usb",children:"beeper -ON_USB"}),"\n",(0,t.jsx)(s.h1,{id:"beeper",children:"beeper"}),"\n",(0,t.jsx)(s.p,{children:"beeper GYRO_CALIBRATED\nbeeper RX_LOST\nbeeper RX_LOST_LANDING\nbeeper DISARMING\nbeeper ARMING\nbeeper ARMING_GPS_FIX\nbeeper BAT_CRIT_LOW\nbeeper BAT_LOW\nbeeper GPS_STATUS\nbeeper RX_SET\nbeeper ACC_CALIBRATION\nbeeper ACC_CALIBRATION_FAIL\nbeeper READY_BEEP\nbeeper MULTI_BEEPS\nbeeper DISARM_REPEAT\nbeeper ARMED\nbeeper SYSTEM_INIT\nbeeper ON_USB"}),"\n",(0,t.jsx)(s.p,{children:"Note: A copy paste from the CLI does not work and gives \"Invalid\" due to too many spaces between 'beeper' and the name. Just delete the extra space so there is only one space before hitting 'enter'."}),"\n",(0,t.jsxs)(s.p,{children:["set acc_lpf_hz = 20",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,200]"}),"\nAccelerometer low pass filter. Decreasing the value might help with drift in horizon and level modes."]}),"\n",(0,t.jsxs)(s.p,{children:["set soft_gyro_lpf_hz = 60",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,255]"}),"\nBiQuad Low pass filter for gyro. Works as a substitute for gyro_lpf, which is a hardware filter inside the gyro but can also work together with gyro_lpf. value of 60 gives around 20-25db reflection to frequencies above 200hz, which are usually motor/prop frequencies. The value of 60 should be fine on most multirotors. It may be possible that very noisy setups could benefit from lower values."]}),"\n",(0,t.jsxs)(s.p,{children:["set dterm_lpf_hz = 0",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,255]"}),"\nBiquad low pass filter for D in hz. Should not be needed. Especially not from 2.3.4 versions."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"set acro_plus_factor = 30"})," Replaced with SUPER EXPO\nRange is 0-100. If set to anything other than 0 roll and pitch rates in the GUI will be ignored. RC rate and RC expo still apply. Warning 100 results in insane rolls and flips that may result in your inability to comprehend. Use at your own risk!"]}),"\n",(0,t.jsx)(s.p,{children:'See the "What is Acro Plus" topic on the Frequently Asked Questions page.'}),"\n",(0,t.jsxs)(s.p,{children:["set yaw_jump_prevention_limit = 200",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[80,...,500]"}),(0,t.jsx)("br",{}),"\nThe maximum allowed P on Yaw stops....when stick centered basically.\nDescription by Boris here: ",(0,t.jsx)(s.a,{href:"http://www.rcgroups.com/forums/showpost.php?p=33860926&postcount=16558",children:"http://www.rcgroups.com/forums/showpost.php?p=33860926&postcount=16558"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)("strike",{children:["set delta_from_gyro = ON",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)("strike",{children:[(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{})]}),"\nDescription by ctzsnooze here: ",(0,t.jsx)(s.a,{href:"http://www.rcgroups.com/forums/showpost.php?p=33859758&postcount=16547",children:"http://www.rcgroups.com/forums/showpost.php?p=33859758&postcount=16547"}),'\nAlso see "The delta_from_gyro setting and all about the PID Controller D values" on the "Betaflight Deep Dive" Wiki page and the "How does yaw_jump_prevention_limit work ?" in the FAQs.']}),"\n",(0,t.jsxs)(s.p,{children:["RC_smoothing = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"This enables a running average of the RC commands (stick values from TX). If you see large steps in the rc command BlackBox traces which then cause jumps in the 'P' and/or 'D' traces enabling this will smooth these out."}),"\n",(0,t.jsxs)(s.p,{children:["status",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"The status command is used to give a brief overview of the health of the Flight Controller. One of the most useful readings is the CPU percentage."}),"\n",(0,t.jsx)(s.p,{children:"Here is an example output from the status command that shows the CPU at 100%\nThis will more than likely mean the Flight Controller will not arm."}),"\n",(0,t.jsx)(s.p,{children:"System Uptime: 46 seconds, Voltage: 149 * 0.1V (4S battery - OK), CPU:100%\nCPU Clock=72MHz, GYRO=MPU6050, ACC=MPU6050.n, BARO=MS5611, MAG=HMC5883\nCycle Time: 988, I2C Errors: 0, config size: 1316"}),"\n",(0,t.jsx)(s.p,{children:"Here is another example output from the status command that shows the CPU at 37%\nThis gives plenty of CPU head-room for other Flight Controller features to be enabled if desired.\nSystem Uptime: 104 seconds, Voltage: 1 * 0.1V (1S battery - NOT PRESENT), CPU:37%\nCPU Clock=72MHz, GYRO=MPU6500, ACC=MPU6500\nCycle Time: 365, I2C Errors: 1, config size: 1316"}),"\n",(0,t.jsx)(s.p,{children:"See the tasks command for details on how the CPU percentage usage can be lowered."}),"\n",(0,t.jsxs)(s.p,{children:["tasks",(0,t.jsx)("br",{}),"\nUsed in conjunction with the status command to determine the general health of the copter.\nHere is an example output that shows too many features running which will give rise to 100% CPU usage:\nTask list:\n0 - SYSTEM, max = 10 us, avg = 0 us, total = 1 ms\n1 - GYRO/PID, max = 1039 us, avg = 722 us, total = 19987 ms\n2 - ACCEL, max = 151 us, avg = 120 us, total = 672 ms\n3 - SERIAL, max = 141 us, avg = 2 us, total = 17 ms\n4 - BEEPER, max = 8 us, avg = 0 us, total = 2 ms\n5 - BATTERY, max = 40085 us, avg = 15 us, total = 51 ms\n6 - RX, max = 159 us, avg = 128 us, total = 205 ms\n7 - COMPASS, max = 160 us, avg = 124 us, total = 24 ms\n8 - BARO, max = 137 us, avg = 105 us, total = 183 ms\n10 - ALTITUDE, max = 281 us, avg = 163 us, total = 122 ms\n11 - DISPLAY, max = 130010 us, avg = 32784 us, total = 4391 ms"]}),"\n",(0,t.jsx)(s.p,{children:"If the CPU load is 100% then disable Magnetometer, Barometer, LEDstrip and Display then try again."}),"\n",(0,t.jsx)(s.p,{children:"Are you running LuxFloat? If so, change to MWREWRITE."}),"\n",(0,t.jsx)(s.p,{children:"Also reduce the amount of AUX channels to reduce time for task RX."}),"\n",(0,t.jsx)(s.p,{children:"Notes copied from Forum:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"ATTITUDE is as it says acc calculations."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"ACCEL is only sampling of accelerometer and filtering and ATTITUDE is real processing of it, which doesnt have to be fast. 100hz is more than enough!"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:'When posting to the Forum please type "version", "status" and "tasks" and post all three of these CLI outputs as well as which PIDC is used. Version is important since it shows What \xdfF version and processor binary (.hex or .bin) file was loaded.'}),"\n"]}),"\n"]}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"New 2.4.0 CLI commands"})}),"\n",(0,t.jsxs)(s.p,{children:["set pid_delta_method = MEASUREMENT",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[MEASUREMENT,ERROR]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"It's the old _delta_from_gyro = OFF. Boris gave it a proper name.\nThere is basically a choice between 2 types of delta"}),"\n",(0,t.jsx)(s.p,{children:"set airmode_saturation_limit = 50"}),"\n",(0,t.jsx)(s.p,{children:"Default value of 50 means that airmode will try to compensate at it's best till 50% saturation. 0 means always maximum stabilization and 100 always limited. 0 is like version 2.3.3 and 2.3.4 and 100 would act same like pre 2.3.3 and like in 2.3.5."}),"\n",(0,t.jsx)(s.p,{children:"2.5.x has no limit (removed)....works as 2.3.3 and 2.3.4. There is just yaw_p_limit to prevent yaw domination."}),"\n",(0,t.jsx)(s.p,{children:"set gyro_sync_denom = 1"}),"\n",(0,t.jsx)(s.p,{children:"For 2khz, set it = 4\nfor 2.6khz, set it = 3\nfor 4 khz, set it = 2 (iffy depending on ESCs, can be used with OneShot125 if Short Cal'ed or with MultiShot & OneShot42)\nfor 8 khz (not recommended) set it = 1 (Can be used if ESCs are running MutliShot or OneShot42)"}),"\n",(0,t.jsx)(s.p,{children:"Denom is always a divider of the max loop rate (8khz). 4 means 8kHz /4 = 2khz. Loop time is the reciprocal (1/ Rate). Don't forget to check CPU usage when playing with this value.\nIt is highly recommended to use the 'looptime' (in microSecond) box in the config GUI. This takes care of all the required settings."}),"\n",(0,t.jsxs)(s.p,{children:["set vbat_pid_compensation = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ON,OFF]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"Uses maximum cell voltage as an offset. Tune your quad with a full lipo and your pids will be scaled up to 25% when voltage gets lower."}),"\n",(0,t.jsx)(s.p,{children:"Also good when you have old and new lipos. The old ones with more voltage droop will automatically get more PID adjustments.\nIt also disables itself when voltage completely drops below 2 cells.\nThe cell count is calculated and the PID adjustments are based on the Cell voltage. Therefore moving from 3S to 4S is not a problem."}),"\n",(0,t.jsx)(s.p,{children:"Note: This requires VBAT connection on FC."}),"\n",(0,t.jsxs)(s.p,{children:["set blackbox_device = SERIAL",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[SERIAL,SPIFLASH,SDCARD]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"New named values."}),"\n",(0,t.jsxs)(s.p,{children:["set pid_controller = = MWREWRITE",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[MWREWRITE,LUX,MW23]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"New named values.\nNote: all other PIDCs have been removed.\nV2.4.0 has only MWREWRITE & LUX\nMW23 is added back in V2.4.1"}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"New 2.4.1 RC2 CLI commands"})}),"\n",(0,t.jsx)(s.p,{children:"set dterm_average_count = 4"}),"\n",(0,t.jsx)(s.p,{children:"averaging samples can now be configured for dterm to remove spiking."}),"\n",(0,t.jsx)(s.p,{children:"set acro_plus_offset = 40"}),"\n",(0,t.jsx)(s.p,{children:"I brought back the normal rates in it. Reworked it with fixed point math, but now I also added acro_plus_offset. This is the breakpoint for acro plus. That means normal rates up to offset percentage of the stick output and after that the desired acro_plus_factor kicks in."}),"\n",(0,t.jsx)(s.p,{children:"Works really well!"}),"\n",(0,t.jsxs)(s.p,{children:["set max_aux_channels = 4 ?? ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,16]"}),(0,t.jsx)("br",{}),"\nNeed to check what the default and maximum number of aux channels are."]}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"New 2.4.2 CLI commands"})}),"\n",(0,t.jsxs)(s.p,{children:["serialpassthrough",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[id] [baud] [mode]"}),(0,t.jsx)("br",{}),"\nSerial data to port forwarding.\nUART1 - ID 0\nUART2 - ID 1\nUART3 - ID 2"]}),"\n",(0,t.jsx)(s.p,{children:"If your OSD is connected to UART2 with a baudrate of 57600 and you want to connect to it with your software enter this command:\nserialpassthrough 1 57600\nThen disconnect cleanflight configurator and connect your OSD Software to the com port."}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"New 2.5.0 RC1 CLI commands"})}),"\n",(0,t.jsx)(s.p,{children:"Note: Use configurator to set looptime (in microSeconds) and all needed CLI values will be automatically set for proper operation."}),"\n",(0,t.jsx)(s.p,{children:"TODO\nadd the new CLI commands/settings."}),"\n",(0,t.jsxs)(s.p,{children:["set use_oneshot42 = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nEnable OneShot42. Feature OneShot125 must be active."]}),"\n",(0,t.jsxs)(s.p,{children:["set use_multishot = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nEnable MultiShot. Feature OneShot125 must be active."]}),"\n",(0,t.jsxs)(s.p,{children:["set sbus_inversion = OFF ?? ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nSBUS inversion ONLY ON F3 TARGETS."]}),"\n",(0,t.jsxs)(s.p,{children:["set frsky_vfas_cell_voltage = OFF ?? ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nConfigurable VFAS cell voltage / battery voltage."]}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"New 2.5.01 RC2 CLI commands"})}),"\n",(0,t.jsxs)(s.p,{children:["set forced_motor_pwm = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),'\nReplaces set enable_fast_pwm. This is automatically set to proper values when LOOPTIME (microSeconds) is set using the Config GUI.\nAlso see "set motor_pwm_rate" above.']}),"\n",(0,t.jsx)("u",{children:"New 2.5.0 Final"}),"\n",(0,t.jsx)(s.p,{children:"TODO\nFill in the details of possible values and a description of what these do."}),"\n",(0,t.jsxs)(s.p,{children:["set debug_mode = NONE",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[NONE,CYCLETIME,BATTERY,GYRO,ACCELEROMETER,MIXER,AIRMODE]"}),(0,t.jsx)("br",{}),"\nEnables display/logging of various debug information through the debug streams.",(0,t.jsx)("br",{}),"\nData can be seen as Debug 0-3 in the Sensors tab and logs.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(s.p,{children:["set spektrum_sat_bind_autoreset = 1",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[1,??]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(s.p,{children:["set pid_process_denom = 1",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[1,...,8]"}),(0,t.jsx)("br",{}),"\nDetermines PID and motor write frequency by dividing the gyro sample rate. This is automatically set to proper values when LOOPTIME (microSeconds) is set using the Config GUI."]}),"\n",(0,t.jsx)("u",{children:"New in 2.5.3"}),"\n",(0,t.jsxs)(s.p,{children:["set yaw_p_limit = 300",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[100,...,300]"}),(0,t.jsx)("br",{}),"\nSets the maximum allowed P on Yaw."]}),"\n",(0,t.jsx)("u",{children:"New in 2.5.4"}),"\n",(0,t.jsxs)(s.p,{children:["set gyro_cal_on_first_arm = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nForces a Gyro calibration upon Arming the first time after power up when set = ON."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{name:"v260"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"Changes in 2.6.0"})}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)("u",{children:"Removed:"}),(0,t.jsx)("br",{}),"\nset acro_plus_factor",(0,t.jsx)("br",{}),"\nset acro_plus_offset",(0,t.jsx)("br",{}),"\nset p_pitchf and all other float PID variables",(0,t.jsx)("br",{}),"\nset level_horizon",(0,t.jsx)("br",{}),"\nset level_angle",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("u",{children:"Changed:"}),(0,t.jsx)("br",{}),"\nset gyro_soft_lpf = 60 replaced with set gyro_lowpass_hz = 80",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,500]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"br/>"}),"\n",(0,t.jsxs)(s.p,{children:["set dterm_lpf_hz = 0 replaced with set dterm_lowpass_hz = 70",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,500]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"br/>"}),"\n",(0,t.jsxs)(s.p,{children:["set dterm_average_count = 4",(0,t.jsx)("br",{}),"\nNew range: ",(0,t.jsx)("i",{children:"[0,...,12]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("u",{children:"Added:"}),(0,t.jsx)("br",{}),"\nescprog ",(0,t.jsx)("i",{children:"[bl|sk] [#]"}),(0,t.jsx)("br",{}),(0,t.jsx)("a",{name:"escprog"}),"\nThe first argument, ",(0,t.jsx)("i",{children:"bl"})," or ",(0,t.jsx)("i",{children:"sk"}),", is your ESC bootloader (bl for blheli or sk for simonk)",(0,t.jsx)("br",{}),"\nThe second argument is the ESC number you wish to connect to.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"\nYou can connect the ESC power at any point.",(0,t.jsx)("br",{}),"\nType the command, then disconnect or close the cleanflight configurator.",(0,t.jsx)("br",{}),"\nNow connect with BLHeliSuite using the appropriate (USB/Com) interface. (C or 1)",(0,t.jsx)("br",{}),"\nAtmel SK interface needs confirmed, but should be option 4 or 5.",(0,t.jsx)("br",{}),"\nAfter finishing with one ESC the board needs to be restarted before running the CLI command for the next ESC. This usually means unplugging both the battery and USB.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(s.p,{children:["set iterm_reset_degrees = 200",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[50,...,1000]"}),(0,t.jsx)("br",{}),"\nExperimental threshold for resetting iterm for pitch and roll on certain rates",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set super_expo_factor = 30",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[1,...,100]"}),(0,t.jsx)("br",{}),"\nSuper Expo Factor",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set vbat_hysteresis = 1",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,250]"}),(0,t.jsx)("br",{}),"\nHysteresis for alarm, default 1 = 0.1V",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set yaw_iterm_reset_degrees = 50",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[25,...,1000]"}),(0,t.jsx)("br",{}),"\nExperimental threshold for resetting iterm for yaw on certain rates",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set yaw_lowpass_hz = 70",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0,...,500]"}),(0,t.jsx)("br",{}),"\nAdditional yaw filter when yaw axis too noisy",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{name:"v261"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"Changes in 2.6.1"})}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)("u",{children:"Removed:"}),(0,t.jsx)("br",{}),"\nescprog ",(0,t.jsx)("i",{children:"[bl|sk] [#]"}),(0,t.jsx)("br",{}),(0,t.jsx)("a",{name:"escprog"})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{name:"v270"}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"Changes in 2.7.0"})}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set super_expo_factor_yaw = 30 ",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[1-100]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set super_expo_yaw = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON,ALWAYS]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set iterm_always_reset = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[OFF,ON]"}),(0,t.jsx)("br",{}),"\nOptional Iterm reset option even without super expo"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set unsynced_fast_pwm = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ON,OFF]"}),(0,t.jsx)("br",{}),"\nunsynced motor update speeds for fast PWM protocols up to 32k with",(0,t.jsx)(s.br,{}),"\n","Set motor_pwm_rate = [0-32000]\n(Oneshot125 not over 4000, os42 not over 12000, ms right up to 32k)"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set fast_pwm_protocol = ONESHOT125",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ONESHOT125,ONESHOT42,MULTISHOT]"}),(0,t.jsx)("br",{}),"\nconfiguring fast PWM protocols"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)("i",{children:"Replaced use_Multishot and use_oneshot42."}),(0,t.jsx)(s.br,{}),"\n","Note: 'feature oneshot125' must be enabled to use any of these fast pwm protocols."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set iterm_reset_offset = 15",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0-100]"}),(0,t.jsx)("br",{}),"\nConfigurable Iterm reset offset"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{name:"v280"}),"\n",(0,t.jsx)("u",{children:(0,t.jsx)("i",{children:"Changes in 2.8.0"})}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.p,{children:"TODO - add new CLI comands with explainations"}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set airmode_activate_throttle = 1350",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[1000-2000]"}),(0,t.jsx)("br",{}),"\nThis keeps AirMode OFF until the the first time throttle reaches this value. AirMode is always on after this.\nNote that 3D users have to reconfigure their threshold to something else otherwise airmode would be always enabled."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set iterm_reset is REMOVED",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set anti_desync_power_step = 10000",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0-10000]"}),(0,t.jsx)("br",{}),"\nThe default is set to the maximum ESC throttle change. Decrease until desync no longer happen."]}),"\n",(0,t.jsxs)(s.p,{children:["Boris noted: For those who have desync issues might try this. Very curious if this can help ESCs in some situation with hard quick motor jumps from pid controller. I flew it and it flew quite well.",(0,t.jsx)(s.br,{}),"\n","I was analysing some of the logs from folks who had desyncs or unwanted rolls or flips. In 100% of cases desync happened when PID controller was doing abrupt throttle changes. Like for example after roll or flip where the quad needs to get stopped motors would shortly pulse up and down. That abrupt stepping can now be controlled with this feature. The ESC's have the most difficulty with quick changing RPM's.",(0,t.jsx)(s.br,{}),"\n","This is working directly on the motor output. It is basically the maximum allowed throttle change within 1ms.\n100 means 100 throttle steps per millisecond."]}),"\n",(0,t.jsxs)(s.p,{children:["From powdermnky007",(0,t.jsx)(s.br,{}),"\n","I saw Boris set the desync prevention thing down to 100, so if 1000 still desyncs (it probably will) drop down to 500, 250, 100 etc."]}),"\n",(0,t.jsx)(s.p,{children:"Make big jumps until you fix it, then work your way back up slowly."}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set d_yaw = 20",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0-200]"}),(0,t.jsx)("br",{}),"\nAs per release notes this now is what sets the yaw_jump_prevention_limit.\nBoris noted: Yes 0 yaw D is 400 actually. Which might be too much in most times.",(0,t.jsx)(s.br,{}),"\n","1 D step equals to 8 steps in yaw_jump_prevention reduction",(0,t.jsx)(s.br,{}),"\n","D of 20: 400 - 160 = 240. (400 - d_yaw *8)"]}),"\n",(0,t.jsx)(s.p,{children:"Increasing Yaw D reduces the yaw_jump_prevention_limit, which is a limit on motor power during yaw movements.\nHence higher yaw D numbers mean less 'jump' and a reduction in the maximum possible yaw rate."}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set ledstrip_visual_beeper = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ON,OFF]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set iterm_ignore_threshold = 900",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[50-1000]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set yaw_iterm_ignore_threshold = 35",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[25-1000]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(s.p,{children:"ctzsnooze describes these two settings:\nBoth \"iterm_ignore_threshold\" and \"yaw_iterm_ignore_threshold\" parameters modify iTerm behavior during fast stick inputs. When intended turn rate is zero, e.g. while hovering or in stable FFF, iTerm is 'normal' - set by PID I alone - because iTerm accumulates 'normally'. As intended turn rate (set in acro by stick angle) approaches the term_ignore_threshold value, iTerm accumulation is decreased until it is zero at, and above, the item_ignore value."}),"\n",(0,t.jsx)(s.p,{children:"Note that with this system iTerm accumulation during uncommanded events (wind, impact, etc) is always 'normal' - the attenuation occurs only during commanded inputs."}),"\n",(0,t.jsx)(s.p,{children:"The intent is to smoothly reduce inputs to iTerm at high commanded turn rates, e.g. during flips and rolls, so that we minimise unwanted iTerm accumulation, which we know can cause bounce back or instability immediately we stop the flip or roll."}),"\n",(0,t.jsx)(s.p,{children:"A higher threshold value allows more iTerm accumulation during high roll rate commands, and vice versa."}),"\n",(0,t.jsx)(s.p,{children:"If the threshold is too low, a quick push forward on the stick may not accumulate enough iTerm to lock the new desired angle. If that happens, consider increasing the threshold."}),"\n",(0,t.jsx)(s.p,{children:"A combination of a lower threshold and a higher PID I value may be useful if you want more I to deal with really windy days (i.e. to manage low amplitude relatively low frequency uncommanded inputs more aggressively) but you don't want or are getting excessive I effects during commanded flips, rolls etc. The default value of 200 seems about right, however at this point in time the optimal value is not known with great certainty."}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)("strike",{children:["'set dynamic_pid = ON'",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ON,OFF]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"removed in 3.0.0"}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set fast_pwm_protocol = ONESHOT125",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ONESHOT125,ONESHOT42,MULTISHOT,OFF]"}),(0,t.jsx)("br",{}),"\nset fast_pwm_protocol = off for brushed or normal pwm in 2.8"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["feature -SUPEREXPO_RATES",(0,t.jsx)("br",{}),"\nDisables the Super Expo feature.\nThis will allow the old rates and Expos."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["feature -AIRMODE",(0,t.jsx)("br",{}),"\nDisables the Air Mode feature."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set rc_rate_yaw = 0",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[0-1.0??]"}),(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["set ledstrip_visual_beeper = OFF",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("i",{children:"[ON,OFF]"}),(0,t.jsx)("br",{}),"\nWhen set to on, and the LEDLOW mode is active (i.e. LED strip off), blink the LED strip in synch with beeping, as a visual indicator in cases where the craft is too far away for the beeper to be heard / multiple craft are flying."]})]})}function c(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>o});var t=n(67294);const r={},i=t.createContext(r);function o(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);