"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1632],{16080:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>h});var n=r(85893),i=r(11151);const o={},l="ESC Telemetry",s={id:"wiki/guides/current/ESC-Telemetry",title:"ESC Telemetry",description:"There are two ways to get ESC data to the flight controller:",source:"@site/docs/wiki/guides/current/ESC-Telemetry.md",sourceDirName:"wiki/guides/current",slug:"/wiki/guides/current/ESC-Telemetry",permalink:"/docs/wiki/guides/current/ESC-Telemetry",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"wiki",previous:{title:"Dynamic Idle",permalink:"/docs/wiki/guides/current/Dynamic-Idle"},next:{title:"External OSD - MWOSD - CMS",permalink:"/docs/wiki/guides/current/External-OSD-MWOSD-CMS"}},a={},h=[{value:"DShot Telemetry",id:"dshot-telemetry",level:2},{value:"DShot RPM Telemetry",id:"dshot-rpm-telemetry",level:3},{value:"Extended DShot Telemetry",id:"extended-dshot-telemetry",level:3},{value:"Serial ESC Telemetry",id:"serial-esc-telemetry",level:2},{value:"Requirements:",id:"requirements",level:3},{value:"Procedure:",id:"procedure",level:3}];function d(e){const t={a:"a",admonition:"admonition",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"esc-telemetry",children:"ESC Telemetry"}),"\n",(0,n.jsx)(t.p,{children:"There are two ways to get ESC data to the flight controller:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"DShot Telemetry, which means sending data back from the ESC over the same single DShot signal wire that is being used to control the motors"}),"\n",(0,n.jsx)(t.li,{children:"Serial ESC Telemetry, where one or more ESCs are connected to the flight controller by a serial port."}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"This document explains the process of getting RPM and related data from the ESC to the Flight Controller. It does not discuss how to get that data from the Flight Controller back to the radio receiver."})}),"\n",(0,n.jsx)(t.h2,{id:"dshot-telemetry",children:"DShot Telemetry"}),"\n",(0,n.jsx)(t.h3,{id:"dshot-rpm-telemetry",children:"DShot RPM Telemetry"}),"\n",(0,n.jsx)(t.p,{children:"JoeLucid, in March 2019, developed the bidirectional DShot code to send RPM data back to the Flight Controller via the singe DShot communication wire. RPM telemetry over DShot was a significant improvement over serial ESC telemetry because it updated the data much faster, and required no additional wiring. It is now supported by nearly all DShot ESC firmware."}),"\n",(0,n.jsx)(t.p,{children:"DShot RPM Telemetry provided the following user benefits:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/wiki/guides/current/DSHOT-RPM-Filtering",children:"RPM filtering"}),", where dynamic notch filters tracked each motor's center frequency - 12 dynamic RPM filters for a quadcopter - greatly improving RPM based noise rejection"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/wiki/guides/current/Dynamic-Idle",children:"Dynamic Idle"}),", where the drive to the motors can be rapidly changed, under PID control, so that a motor's RPM does not fall below a defined minimum RPM value. Compared to a simple minimum idle throttle value, this reduces the likelihood of a desync and allows the PIDs to use the full range of motor drive values."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/docs/wiki/release/betaflight-4-5-release-notes#161-rpm-limiter-build-option",children:"RPM Limiting"}),", which allows the user to limit maximum average RPM, for spec class racing."]}),"\n",(0,n.jsx)(t.li,{children:"RPM logging for testing and debugging. Since Debug values can be shown in the OSD, we can display 'live' RPM values in the OSD."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"extended-dshot-telemetry",children:"Extended DShot Telemetry"}),"\n",(0,n.jsxs)(t.p,{children:["This sends additional parameters such as ESC Temperature, Voltage, Current and others to the FC. It is not yet supported on all ESC firmwares, with Daniel Mosquera's ",(0,n.jsx)(t.a,{href:"https://github.com/bird-sanctuary/bluejay",children:"Bluejay"})," being most up-to-date."]}),"\n",(0,n.jsxs)(t.p,{children:["We don't have a wiki article about EDT, but it is described in these ",(0,n.jsx)(t.a,{href:"https://github.com/betaflight/betaflight/pulls?q=is%3Apr+EDT",children:"Betaflight Github EDT PR's"})," and on this ",(0,n.jsx)(t.a,{href:"https://github.com/bird-sanctuary/extended-dshot-telemetry",children:"bird-sanctuary's GitHub page"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"serial-esc-telemetry",children:"Serial ESC Telemetry"}),"\n",(0,n.jsx)(t.p,{children:"The following information is quite old and may not be accurate."}),"\n",(0,n.jsx)(t.h3,{id:"requirements",children:"Requirements:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Supported flight controller with Betaflight version 3.1.0 RC1 or later."}),"\n",(0,n.jsx)(t.li,{children:"Betaflight configurator version 1.8.5 or later."}),"\n",(0,n.jsx)(t.li,{children:"ESC with Serial Telemetry enabled (usually requires AM32 or BLHeli32)"}),"\n",(0,n.jsx)(t.li,{children:"A spare hardware UART on the flight controller."}),"\n",(0,n.jsx)(t.li,{children:"(Optional) Telemetry from flight controller to RC receiver."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"procedure",children:"Procedure:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Install the ESCs"})," to the quad and connect the ESC's Tx pin, and ground, to the RX pin of the spare hardware UART on the flight controller. With individual ESCs, a loom to split the single wire from the RX pin of the UART into four wires (one for each ESC) will be required."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Open the Betaflight configurator (V 1.8.5 or later) and go to the Ports tab."})}),"\n",(0,n.jsx)(t.p,{children:'Find the UART that the ESC telemetry is connected to and in the column marked "Sensor Input", select ESC in the left box and leave AUTO in the right box. Don\'t forget to hit the "save and reboot" button.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Still in Betaflight configurator, switch to the Configuration tab."})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:(0,n.jsx)(t.strong,{children:"Make sure you are using the Dshot protocol for ESC communication!"})})}),"\n",(0,n.jsx)(t.p,{children:'Under "Other Features", make sure that "ESC_SENSOR" is enabled.'}),"\n",(0,n.jsx)(t.p,{children:'On the Battery Voltage section enable "VBAT" and select ESC Sensor from the drop down menu below. Configure the cell voltages as required. (Defaults should be fine)'}),"\n",(0,n.jsx)(t.p,{children:'On the Current Sensor section enable "CURRENT_METER" and select ESC Sensor from the drop down menu below. Configure the scale and offset as required. (Defaults should be fine)'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"To test, set it all up then plug in the flight controller as well as the battery, open the configurator to the configuration tab and arm via the tx within a few seconds of powering on the flight controller. PROPS OFF ON THE BENCH!"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Confirm that telemetry is being received by the transmitter."})}),"\n",(0,n.jsx)(t.p,{children:"If using a Taranis, don't forget to arm the quad when you \"Discover Sensors\" or the ESC telemetry won't be discovered."}),"\n",(0,n.jsx)(t.p,{children:'Taranis users may want to change the "FUEL" sensor from % to mAh for an accurate reading.'})]})}function c(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},11151:(e,t,r)=>{r.d(t,{Z:()=>s,a:()=>l});var n=r(67294);const i={},o=n.createContext(i);function l(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);