"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3560],{44697:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>r});var l=n(85893),s=n(11151);const a={},o="VTX",d={id:"development/VTX",title:"VTX",description:"Cleanflight supports control of VTX modules.",source:"@site/docs/development/VTX.md",sourceDirName:"development",slug:"/development/VTX",permalink:"/docs/development/VTX",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"Units",permalink:"/docs/development/Units"},next:{title:"Gyro_offset_yaw",permalink:"/docs/development/gyro-offset-yaw"}},i={},r=[{value:"VTX Systems",id:"vtx-systems",level:2},{value:"VTX Button",id:"vtx-button",level:2},{value:"VTX Button usage",id:"vtx-button-usage",level:3},{value:"VTX Table",id:"vtx-table",level:2},{value:"Bands and channels",id:"bands-and-channels",level:3},{value:"Power levels",id:"power-levels",level:3},{value:"IRC Tramp devices should use:",id:"irc-tramp-devices-should-use",level:4},{value:"rtc6705 should use:",id:"rtc6705-should-use",level:4},{value:"SmartAudio V1.0 devices should use:",id:"smartaudio-v10-devices-should-use",level:4},{value:"SmartAudio V2.0 devices should use:",id:"smartaudio-v20-devices-should-use",level:4},{value:"SmartAudio V2.1 devices vary depending on their model. Check the manufacturers website.",id:"smartaudio-v21-devices-vary-depending-on-their-model-check-the-manufacturers-website",level:4},{value:"Complete Examples",id:"complete-examples",level:3},{value:"IRC Tramp device",id:"irc-tramp-device",level:4},{value:"SmartAudio 1.0 device",id:"smartaudio-10-device",level:4},{value:"SmartAudio 2.0 device",id:"smartaudio-20-device",level:4},{value:"SmartAudio 2.1 device",id:"smartaudio-21-device",level:4},{value:"rtc6705",id:"rtc6705",level:4},{value:"Pitmode",id:"pitmode",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{id:"vtx",children:"VTX"}),"\n",(0,l.jsx)(t.p,{children:"Cleanflight supports control of VTX modules."}),"\n",(0,l.jsx)(t.h2,{id:"vtx-systems",children:"VTX Systems"}),"\n",(0,l.jsx)(t.p,{children:"Current support includes"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"RTC6705 directly connected to the CPU (maybe via a PCB board interconnect, e.g. SPRACINGF3NEO)"}),"\n",(0,l.jsx)(t.li,{children:"IRC Tramp"}),"\n",(0,l.jsx)(t.li,{children:"TBS Smart Audio"}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"vtx-button",children:"VTX Button"}),"\n",(0,l.jsx)(t.p,{children:"If your FC has a button, excluding a BOOT buttons, then it can be used for VTX control."}),"\n",(0,l.jsx)(t.p,{children:"Some boards like the SPRacingF3NEO have both a VTX module and a button.\nOther boards like the SPRacingF3MINI have multiple buttons."}),"\n",(0,l.jsx)(t.h3,{id:"vtx-button-usage",children:"VTX Button usage"}),"\n",(0,l.jsx)(t.p,{children:"While the VTX button is held the STATUS 2 LED will flash N times per second indicating the action that will be taken when\nthe button is released. The flashing starts as soon as the button is held. e.g. You press the button, count flashes and\nthen release as appropriate."}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{children:"Duration"}),(0,l.jsx)(t.th,{children:"Function"}),(0,l.jsx)(t.th,{children:"Flashes"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:"25ms to 1s"}),(0,l.jsx)(t.td,{children:"Cycle Channel"}),(0,l.jsx)(t.td,{children:"4"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:"1s to 3s"}),(0,l.jsx)(t.td,{children:"Cycle Band"}),(0,l.jsx)(t.td,{children:"3"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:"3s to 5s"}),(0,l.jsx)(t.td,{children:"Cycle Power and RF Power"}),(0,l.jsx)(t.td,{children:"2"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:"5s or more"}),(0,l.jsx)(t.td,{children:"Save FC settings"}),(0,l.jsx)(t.td,{children:"1"})]})]})]}),"\n",(0,l.jsx)(t.p,{children:"Example to cycle VTX power"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"| 0 seconds      | 1 second      | 2 seconds    | 3 seconds     | 4 seconds     | 5 seconds     | 6 seconds or more |\n|-HOLD BUTTON-----------------------------------|-RELEASE BUTTON-NOW------------|-RELEASED TOO LATE TO CHANGE POWER-|\n| 4 Flashes      | 3 flashes     | 3 flashes    | 2 flashes     | 2 flashes     | 1 flash       | 1 flash           |\n"})}),"\n",(0,l.jsx)(t.p,{children:"The VTX button works with ALL VTX systems including onboard RTC6705, Tramp and SmartAudio."}),"\n",(0,l.jsx)(t.p,{children:"If the VTX can be turned off then POWER 0 will turn off the VTX and POWER 1 will set the VTX into it's lowest power output.\nIf the VTX cannot be turned off then POWER 0 will set the VTX into it's lowest power output."}),"\n",(0,l.jsx)(t.h2,{id:"vtx-table",children:"VTX Table"}),"\n",(0,l.jsx)(t.p,{children:"As of Betaflight 4.1.0, band/channel and power level information needed to control videotransmitters is no longer hardcoded,\nbut stored in a new facility called vtxTable."}),"\n",(0,l.jsx)(t.p,{children:"The contents of the vtxTable need to be setup manually. They need to match the hardware, local laws and regulations, as\nwell as user preferences."}),"\n",(0,l.jsxs)(t.p,{children:["The contents of the table can be examined by typing the command ",(0,l.jsx)(t.code,{children:"vtxtable"})," into the cli.\nExample:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# vtxtable\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A FACTORY    0 5845 5825 5805 5785 5765 5745    0\nvtxtable band 2 BOSCAM_B B FACTORY    0 5752 5771 5790 5809 5828 5847    0\nvtxtable band 3 BOSCAM_E E FACTORY    0    0    0    0    0    0    0    0\nvtxtable band 4 MYBAND   M CUSTOM  5745 5769    0 5806    0 5843    0    0\nvtxtable band 5 RACEBAND R FACTORY    0    0    0 5769 5806 5843    0    0\nvtxtable powerlevels 3\nvtxtable powervalues  14 20 26\nvtxtable powerlabels 25 100 400\n"})}),"\n",(0,l.jsx)(t.h3,{id:"bands-and-channels",children:"Bands and channels"}),"\n",(0,l.jsxs)(t.p,{children:["The example above contains 5 bands, ",(0,l.jsx)(t.strong,{children:"each with a name, a single-letter abbreviation, a factory flag and eight frequencies."})]}),"\n",(0,l.jsx)(t.p,{children:"The factory flag controls how Betaflight communicates with the vtx."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsxs)(t.strong,{children:["When the flag is set to ",(0,l.jsx)(t.code,{children:"FACTORY"}),", Betaflight sends the vtx a band and channel number."]}),"\nThe vtx will then use its built-in frequency table.\nIn this mode, the actual contents of the vtxtable are ",(0,l.jsx)(t.strong,{children:"not"})," send the vtx. They are only used for display in the OSD and similar places.\nAs such, bands with the flag set to ",(0,l.jsx)(t.code,{children:"FACTORY"})," should be set to match the built-in frequency table of the vtx."]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsxs)(t.strong,{children:["When the flag is set to ",(0,l.jsx)(t.code,{children:"CUSTOM"}),", Betaflight sends the vtx the frequency it should use."]}),"\nThis mode utilizes the contents of the table and allows the user to create custom bands with whatever frequencies they like.\n",(0,l.jsxs)(t.strong,{children:["Videotransmitters without a built-in table, such as IRC Tramp or rtc6705 only support ",(0,l.jsx)(t.code,{children:"CUSTOM"}),"."]})]}),"\n",(0,l.jsxs)(t.p,{children:["Entries of the vtxtable can be blocked by setting their frequency to 0. This is especially useful for bands set to ",(0,l.jsx)(t.code,{children:"FACTORY"}),": The spots of\nunwanted entries of the videotransmitter's built-in table can be set to 0, effectively disabling them.\nIn the example above this was used to only allow frequencies between 5725 and 5875 MHz, as a German pilot would want it to comply with\nGerman laws. Additionally, the Fatshark band was replaced with a new custom one."]}),"\n",(0,l.jsx)(t.p,{children:"As a starting point, the following table contains the commonly used frequencies:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This table should not be used as-is, but trimmed down according to local laws and regulations.\nvtxtable band 1 BOSCAM_A A FACTORY 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B FACTORY 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E FACTORY 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F FACTORY 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R FACTORY 5658 5695 5732 5769 5806 5843 5880 5917\n"})}),"\n",(0,l.jsx)(t.h3,{id:"power-levels",children:"Power levels"}),"\n",(0,l.jsxs)(t.p,{children:["In addition the the frequency, videotransmitters also need to know how much power they should use for transmission.\nThe example shown previously contains three power levels, ",(0,l.jsx)(t.strong,{children:"each with a value and a label."})," The label is shown to the user in the OSD,\nwhile the value is sent to the vtx."]}),"\n",(0,l.jsx)(t.p,{children:"Power levels should be setup to match the hardware in use."}),"\n",(0,l.jsx)(t.h4,{id:"irc-tramp-devices-should-use",children:"IRC Tramp devices should use:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 5\nvtxtable powervalues 25 100 200 400 600\nvtxtable powerlabels 25 100 200 400 600\n"})}),"\n",(0,l.jsx)(t.h4,{id:"rtc6705-should-use",children:"rtc6705 should use:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 2\nvtxtable powervalues 1 2\nvtxtable powerlabels MIN MAX\n"})}),"\n",(0,l.jsx)(t.p,{children:"Please note that turning off rtc6705 devices is not possible using powervalues. Use pitmode instead."}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-v10-devices-should-use",children:"SmartAudio V1.0 devices should use:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 4\nvtxtable powervalues 7 16 25 40\nvtxtable powerlabels 25 200 500 800\n"})}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-v20-devices-should-use",children:"SmartAudio V2.0 devices should use:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 4\nvtxtable powervalues 0 1 2 3\nvtxtable powerlabels 25 200 500 800\n"})}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-v21-devices-vary-depending-on-their-model-check-the-manufacturers-website",children:"SmartAudio V2.1 devices vary depending on their model. Check the manufacturers website."}),"\n",(0,l.jsxs)(t.p,{children:["For these devices the ",(0,l.jsx)(t.code,{children:"powervalues"})," are the output power in dBm."]}),"\n",(0,l.jsxs)(t.p,{children:["To query the available power levels from a SmartAudio 2.1 VTX enter the ",(0,l.jsx)(t.code,{children:"vtx_info"})," command with no parameters. This will report the available power settings thus:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# vtx_info\nlevel 14 dBm, power 25 mW\nlevel 20 dBm, power 100 mW\nlevel 26 dBm, power 400 mW\n"})}),"\n",(0,l.jsx)(t.p,{children:"For example the"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.a,{href:"https://www.team-blacksheep.com/products/prod:unifypro32_nano",children:"TBS Unify Pro32 Nano 5G8"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 3\nvtxtable powervalues 14 20 26\nvtxtable powerlabels 25 100 400\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.a,{href:"https://www.team-blacksheep.com/products/prod:unify_pro_hv_race2_m",children:"TBS Unify Pro 5G8 HV - Race 2 (MMCX)"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 3\nvtxtable powervalues 13 20 26\nvtxtable powerlabels 25 100 400\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.a,{href:"https://www.team-blacksheep.com/products/prod:unifypro32_hv",children:"TBS Unify Pro32 HV (MMCX)"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 4\nvtxtable powervalues 14 20 26 30\nvtxtable powerlabels 25 100 400 1W\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.a,{href:"https://www.team-blacksheep.com/products/prod:tbs_unify_evo",children:"TBS Unify EVO"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 4\nvtxtable powervalues 14 20 26 29\nvtxtable powerlabels 25 100 400 800\n"})}),"\n",(0,l.jsx)(t.p,{children:"Power levels may be omitted. This is useful for compliance with local laws and regulations.\nAdditionally, powerlabels (but not values!) can be set to anything three characters long.\nFor example a TBS Unify EVO will also work the this config:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"vtxtable powerlevels 2\nvtxtable powervalues 20 26\nvtxtable powerlabels .1W .4W\n"})}),"\n",(0,l.jsx)(t.h3,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,l.jsx)(t.h4,{id:"irc-tramp-device",children:"IRC Tramp device"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This example enables a lot of power levels and channels.\n# Almost nobody will be able to legally use this without modification.\n# Check your local laws and regulations before use!\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A CUSTOM 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B CUSTOM 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E CUSTOM 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F CUSTOM 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R CUSTOM 5658 5695 5732 5769 5806 5843 5880 5917\nvtxtable powerlevels 5\nvtxtable powervalues 25 100 200 400 600\nvtxtable powerlabels 25 100 200 400 600\n"})}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-10-device",children:"SmartAudio 1.0 device"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This example enables a lot of power levels and channels.\n# Almost nobody will be able to legally use this without modification.\n# Check your local laws and regulations before use!\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A FACTORY 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B FACTORY 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E FACTORY 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F FACTORY 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R FACTORY 5658 5695 5732 5769 5806 5843 5880 5917\nvtxtable powerlevels 4\nvtxtable powervalues 7 16 25 40\nvtxtable powerlabels 25 200 500 800\n"})}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-20-device",children:"SmartAudio 2.0 device"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This example enables a lot of power levels and channels.\n# Almost nobody will be able to legally use this without modification.\n# Check your local laws and regulations before use!\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A FACTORY 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B FACTORY 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E FACTORY 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F FACTORY 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R FACTORY 5658 5695 5732 5769 5806 5843 5880 5917\nvtxtable powerlevels 4\nvtxtable powervalues 0 1 2 3\nvtxtable powerlabels 25 200 500 800\n"})}),"\n",(0,l.jsx)(t.h4,{id:"smartaudio-21-device",children:"SmartAudio 2.1 device"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This example enables a lot of power levels and channels.\n# Almost nobody will be able to legally use this without modification.\n# Check your local laws and regulations before use!\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A FACTORY 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B FACTORY 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E FACTORY 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F FACTORY 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R FACTORY 5658 5695 5732 5769 5806 5843 5880 5917\nvtxtable powerlevels 4\nvtxtable powervalues 14 20 26 30\nvtxtable powerlabels 25 100 400 1W\n"})}),"\n",(0,l.jsx)(t.h4,{id:"rtc6705",children:"rtc6705"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"# This example enables a lot of power levels and channels.\n# Almost nobody will be able to legally use this without modification.\n# Check your local laws and regulations before use!\nvtxtable bands 5\nvtxtable channels 8\nvtxtable band 1 BOSCAM_A A CUSTOM 5865 5845 5825 5805 5785 5765 5745 5725\nvtxtable band 2 BOSCAM_B B CUSTOM 5733 5752 5771 5790 5809 5828 5847 5866\nvtxtable band 3 BOSCAM_E E CUSTOM 5705 5685 5665 5645 5885 5905 5925 5945\nvtxtable band 4 FATSHARK F CUSTOM 5740 5760 5780 5800 5820 5840 5860 5880\nvtxtable band 5 RACEBAND R CUSTOM 5658 5695 5732 5769 5806 5843 5880 5917\nvtxtable powerlevels 2\nvtxtable powervalues 1 2\nvtxtable powerlabels MIN MAX\n"})}),"\n",(0,l.jsx)(t.h3,{id:"pitmode",children:"Pitmode"}),"\n",(0,l.jsx)(t.p,{children:"Pitmode is separate from vtxTable. No power level should be created for pitmode.\nPitmode can be controlled in a variety of ways including OSD, AUX switches and lua scripts."}),"\n",(0,l.jsx)(t.p,{children:"Some videotransmitters have restrictions on its usage. For example, SmartAudio V1.0 and V2.0 devices can only enter pitmode on power-up.\nBetaflight can make the these devices leave pitmode, but not enter it."}),"\n",(0,l.jsx)(t.p,{children:"rtc6705 devices do not support a proper ultra-low power pitmode. Instead, if the board supports it, pitmode turns off rtc6705 devices completely."})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>o});var l=n(67294);const s={},a=l.createContext(s);function o(e){const t=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(a.Provider,{value:t},e.children)}}}]);