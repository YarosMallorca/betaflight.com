"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3176],{77742:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var t=r(85893),s=r(11151);const i={},d="CJMCU",l={id:"support/boards/CJMCU",title:"CJMCU",description:"The CJMCU is a tiny (80mm) board running a STM32F103, which contains a 3-Axis Compass (HMC5883L)",source:"@site/docs/support/boards/CJMCU.md",sourceDirName:"support/boards",slug:"/support/boards/CJMCU",permalink:"/docs/support/boards/CJMCU",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"support",previous:{title:"ChebuzzF3",permalink:"/docs/support/boards/CHEBUZZF3"},next:{title:"CL_RACING AIO F4 Flight controller",permalink:"/docs/support/boards/CLRACINGF4"}},o={},h=[{value:"RX Connections",id:"rx-connections",level:2},{value:"Serial Connections",id:"serial-connections",level:2},{value:"Power Connections",id:"power-connections",level:2},{value:"Motor Connections",id:"motor-connections",level:2}];function c(e){const n={h1:"h1",h2:"h2",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"cjmcu",children:"CJMCU"}),"\n",(0,t.jsx)(n.p,{children:"The CJMCU is a tiny (80mm) board running a STM32F103, which contains a 3-Axis Compass (HMC5883L)\nand an Accelerometer/Gyro (MPU6050)."}),"\n",(0,t.jsx)(n.p,{children:"This board does not have an onboard USB-Serial converter, so an external adapter is needed."}),"\n",(0,t.jsx)(n.h1,{id:"hardware-revisions",children:"Hardware revisions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Revision"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"No boot jumper pads by LED1. Uses blue and red LEDs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"Boot jumper pads presoldered with pins and a jumper by LED1. Uses green and red LEDs."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Version 2 boards are supported from firmware v1.4.0 onwards, do NOT flash earlier versions to version 2 boards."}),"\n",(0,t.jsx)(n.h1,{id:"pins",children:"Pins"}),"\n",(0,t.jsx)(n.h2,{id:"rx-connections",children:"RX Connections"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Pin Label"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA0"}),(0,t.jsx)(n.td,{children:"RC Channel 1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA1"}),(0,t.jsx)(n.td,{children:"RC Channel 2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA2"}),(0,t.jsx)(n.td,{children:"RC Channel 3 / USART2 TX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA3"}),(0,t.jsx)(n.td,{children:"RC Channel 4 / USART2 RX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"VCC"}),(0,t.jsx)(n.td,{children:"Power (See note)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"GND"}),(0,t.jsx)(n.td,{children:"Ground"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"NOTE: The VCC RX Pin is not regulated and will supply what ever voltage is provided to the board, this will mean it'll provide 5v if a 5v serial connection is used. Be careful if you are using a voltage sensitive RX. A regulated 3.3v supply can be found on the top pin of column 1, just below the RX GND pin."}),"\n",(0,t.jsx)(n.h2,{id:"serial-connections",children:"Serial Connections"}),"\n",(0,t.jsx)(n.p,{children:"USART1 (along with power) is on the following pins."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Pin Label"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TX1"}),(0,t.jsx)(n.td,{children:"UART1 TX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"RX1"}),(0,t.jsx)(n.td,{children:"UART2 RX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"GND"}),(0,t.jsx)(n.td,{children:"Ground"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3V3"}),(0,t.jsx)(n.td,{children:"Power +3.3v"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5V"}),(0,t.jsx)(n.td,{children:"Power +5v"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"USART2 is the following pins."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Pin Label"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA2"}),(0,t.jsx)(n.td,{children:"USART2 TX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PA3"}),(0,t.jsx)(n.td,{children:"USART2 RX"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"power-connections",children:"Power Connections"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Pin Label"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Power +"}),(0,t.jsx)(n.td,{children:"Power - 1 Cell 3.7v Max"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Power -"}),(0,t.jsx)(n.td,{children:"Ground"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"motor-connections",children:"Motor Connections"}),"\n",(0,t.jsx)(n.p,{children:"In standard QUADX configuration, the motors are mapped:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cleanflight"}),(0,t.jsx)(n.th,{children:"CJMCU"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Motor 1"}),(0,t.jsx)(n.td,{children:"Motor3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Motor 2"}),(0,t.jsx)(n.td,{children:"Motor2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Motor 3"}),(0,t.jsx)(n.td,{children:"Motor4"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Motor 4"}),(0,t.jsx)(n.td,{children:"Motor1"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"It is therefore simplest to wire the motors:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Motor 1 -> Clockwise"}),"\n",(0,t.jsx)(n.li,{children:"Motor 2 -> Anti-Clockwise"}),"\n",(0,t.jsx)(n.li,{children:"Motor 3 -> Clockwise"}),"\n",(0,t.jsx)(n.li,{children:"Motor 4 -> Anti-Clockwise"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If you are using the Hubsan x4/Ladybird motors, clockwise are Blue (GND) / Red (VCC) wires, anticlockwise\nare Black (GND) / White (VCC).\ni.e. there is one wire on each motor out of the standard RED/BLACK VCC/GND polarity colors that can be used to identify polarity."}),"\n",(0,t.jsx)(n.p,{children:"If you have wired as above, Motor1/Motor2 on the board will be forward."}),"\n",(0,t.jsx)(n.h1,{id:"connecting-a-serial-usb-adapter",children:"Connecting a Serial-USB Adapter"}),"\n",(0,t.jsx)(n.p,{children:"You will need a USB -> Serial UART adapter. Connect:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Adapter"}),(0,t.jsx)(n.th,{children:"CJMCU"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Either 3.3v OR 5v"}),(0,t.jsx)(n.td,{children:"The correct 3.3v OR 5v pin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"RX"}),(0,t.jsx)(n.td,{children:"TX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TX"}),(0,t.jsx)(n.td,{children:"RX"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"When first connected this should power up the board, and will be in bootloader mode. If this does not happen, check\nthe charge switch is set to POW.\nAfter the flashing process has been completed, this will allow access via the cleanflight configurator to change\nsettings or flash a new firmware."}),"\n",(0,t.jsx)(n.p,{children:"WARNING: If the motors are connected and the board boots into the bootloader, they will start\nto spin after around 20 seconds, it is recommended not to connect the motors until the board\nis flashed."}),"\n",(0,t.jsx)(n.h1,{id:"flashing",children:"Flashing"}),"\n",(0,t.jsx)(n.p,{children:"To flash the board:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Open Cleanflight Configurator"}),"\n",(0,t.jsx)(n.li,{children:"Choose the latest CJMCU firmware from the list."}),"\n",(0,t.jsx)(n.li,{children:'Select "Load Firmware [Online]" and wait for the firmware to download.'}),"\n",(0,t.jsx)(n.li,{children:'Tick "No Reboot Sequence" and "Full Chip Erase"'}),"\n",(0,t.jsx)(n.li,{children:"Connect the USB->Serial adapter to the board"}),"\n",(0,t.jsx)(n.li,{children:"Select the USB-UART adapter from the top left box"}),"\n",(0,t.jsx)(n.li,{children:'Click "Flash Firmware"'}),"\n",(0,t.jsx)(n.li,{children:'You should see "Programming: SUCCESSFUL" in the log box'}),"\n",(0,t.jsx)(n.li,{children:'Click "Connect" -> This should open the "Initial Setup" tab and you should see sensor data from the quad shown'}),"\n",(0,t.jsx)(n.li,{children:'Unplug the quad and short the 2 "BOOT0" pins. Revision 1 boards require this to be soldered, revision 2 boards can connect the included jumper to the two pre-soldered pins - This prevents the board from going into bootloader mode on next\nboot, if anything goes wrong, simply disconnect these two pins and the bootloader will start, allowing you to reflash. You cannot\noverwrite the bootloader.'}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"charging",children:"Charging"}),"\n",(0,t.jsx)(n.p,{children:"The CJMCU has on it a TP4056 Lithium battery charging IC that can charge a 1S battery at 1A using a provided 5v supply attached to the 5v serial pin."}),"\n",(0,t.jsx)(n.p,{children:"To charge an attached battery:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Set the power switch to OFF"}),"\n",(0,t.jsx)(n.li,{children:"Set the charge switch to CHG"}),"\n",(0,t.jsx)(n.li,{children:"Plug in a 1S battery to the battery pins"}),"\n",(0,t.jsx)(n.li,{children:"Plug in a 5v supply to the 5v serial pins"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The charger will finish when either the battery reaches 4.2v, or the battery's voltage is greater than the charger's input voltage."}),"\n",(0,t.jsx)(n.p,{children:"The two nearby LEDs will show the status of charging:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Green LED"}),(0,t.jsx)(n.th,{children:"Red LED"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Charging"}),(0,t.jsx)(n.td,{children:"On"}),(0,t.jsx)(n.td,{children:"Off"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Finished"}),(0,t.jsx)(n.td,{children:"Off"}),(0,t.jsx)(n.td,{children:"On"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5v not connected"}),(0,t.jsx)(n.td,{children:"Off"}),(0,t.jsx)(n.td,{children:"Off"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Batt not connected"}),(0,t.jsx)(n.td,{children:"Flashing"}),(0,t.jsx)(n.td,{children:"On"})]})]})]}),"\n",(0,t.jsx)(n.h1,{id:"helpful-hints",children:"Helpful Hints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'If you are only using a 4 channel RX, in the auxiliary configuration tab, you can add a "Horizon" mode range around 1500\nfor one of the the AUX channels which will result in it being always on'}),"\n",(0,t.jsx)(n.li,{children:"Enabling the feature MOTOR_STOP helps with crashes so it doesn't try to keep spinning on its back"}),"\n",(0,t.jsx)(n.li,{children:"When the power runs low, the quad will start jumping around a bit, if the flight behaviour seems strange, check your batteries charge"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>d});var t=r(67294);const s={},i=t.createContext(s);function d(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);