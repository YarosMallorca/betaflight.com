<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-support/archive/Magnetometer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Magnetometer / Compass | Betaflight</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://betaflight.com/docs/support/archive/Magnetometer"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Magnetometer / Compass | Betaflight"><meta data-rh="true" name="description" content="These notes only apply to Magnetometers in Betaflight 4.5 or higher"><meta data-rh="true" property="og:description" content="These notes only apply to Magnetometers in Betaflight 4.5 or higher"><meta data-rh="true" property="og:image" content="https://vitroidfpv.com/og-bf?title=Magnetometer / Compass&amp;description=These notes only apply to Magnetometers in Betaflight 4.5 or higher"><meta data-rh="true" name="twitter:image" content="https://vitroidfpv.com/og-bf?title=Magnetometer / Compass&amp;description=These notes only apply to Magnetometers in Betaflight 4.5 or higher"><link data-rh="true" rel="icon" href="/img/betaflight/icon_light.svg"><link data-rh="true" rel="canonical" href="https://betaflight.com/docs/support/archive/Magnetometer"><link data-rh="true" rel="alternate" href="https://betaflight.com/docs/support/archive/Magnetometer" hreflang="en"><link data-rh="true" rel="alternate" href="https://betaflight.com/docs/support/archive/Magnetometer" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Betaflight News RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Betaflight News Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Betaflight News JSON Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.24dbd8b6.css">
<script src="/assets/js/runtime~main.fbebe5ba.js" defer="defer"></script>
<script src="/assets/js/main.dda3efc2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/betaflight/icon_light.svg" alt="Betaflight Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/betaflight/icon_dark.svg" alt="Betaflight Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Betaflight</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/support">Support</a><a class="navbar__item navbar__link" href="/docs/development">Development</a><a class="navbar__item navbar__link" href="/docs/manufacturer">Manufacturer</a><a class="navbar__item navbar__link" href="/docs/release/Betaflight-4.5-Release-Notes">Release</a><a class="navbar__item navbar__link" href="/docs/tuning/3.5-tuning-notes">Tuning</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/stats">Stats</a><a class="navbar__item navbar__link" href="/partner">Partner</a><a class="navbar__item navbar__link" href="/sponsors">Sponsors</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/betaflight/betaflight" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Feeds</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_blank" href="/blog/rss.xml">RSS</a></li><li><a class="dropdown__link" target="_blank" href="/blog/atom.xml">Atom</a></li><li><a class="dropdown__link" target="_blank" href="/blog/feed.json">Json</a></li></ul></div><div class="toggle_MW0i colorModeToggle_DEke"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_SFTY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/support">Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/getting-started">Getting started</a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/archive">Archive</a><button aria-label="Collapse sidebar category &#x27;Archive&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/3D-Setup">3D Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Acro-Trainer">Acro Trainer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Arming-Sequence-And-Safety">Arming Sequence &amp; Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Barometer-Configuration">Barometer Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Betaflight-4.0-CLI-commands-_Work-in-progress">CLI Command Line Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Betaflight-ESC-pass-through">ESC pass-through</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Betaflight-Merchandise">Official Betaflight T-Shirts and Hoodies!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Bidirectional-DSHOT-and-RPM-Filter">Bidirectional DShot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Black-Box-logging-and-usage">Blackbox Logging And Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Buzzer-Mute-Mode">Buzzer Mute Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Community-Presets">Community Presets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Configuring-Crossfire-LQ-for-use-as-RSSI-on-the-Betaflight-OSD">Configuring Crossfire</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Current-Sensor-Calibration">Current Sensor Calibration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/DFU-Hijacking">DFU Hijacking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/DMIN">DMin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/DSHOT-ESC-Protocol">Dshot &amp; BetaFlight 3.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Debug-Modes">Debug Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Deep-Dive">Deep Dive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/ESC-Telemetry">ESC Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/External-OSD-MWOSD-CMS">External OSD - MWOSD - CMS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/FAQ">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/FPV-Camera-Control-Joystick-Emulation">FPV Camera Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Failsafe-(Flight-Controller)">Failsafe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Feed-Forward-2.0">Feed Forward 2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Flight-Controller-Gyro-Orientation">Flight Controller Gyro Orientation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Flight-Controller-Orientation">Flight Controller Orientation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Flying-Tips">Flying Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/FrSky-FPort-Protocol">FrSky FPORT Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Freestyle-Tuning-Principles">Freestyle Tuning Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/GPS-Rescue-Mode-v4-1-to-v4-3">GPS Rescue 4.1 to 4.3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/GPS-Rescue-Mode">GPS Rescue before V4.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/GPS-Rescue-v4-4">GPS Rescue 4.4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/GPS-Rescue-v4-5">GPS Rescue 4.5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Gyro-&amp;-Dterm-Filtering-Recommendations">Gyro and Dterm Filtering Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/HID-Joystick-Support">HID Joystick Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Hardware-Reference">Hardware Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Howto-use-RSSI-with-Spektrum-SPM4649T-and-other-satellites">RSSI with Spektrum</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/I-Term-Relax-Explained">Iterm Relax explained</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/IRC-Tramp">IRC Tramp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Installing-Betaflight">Installing Betaflight</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Integrated-Yaw">Integrated Yaw</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/LED-Strip-Functionality">Led Strip Functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Launch-Control">Launch Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/support/archive/Magnetometer">Magnetometer / Compass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Mass-Storage-Device-(MSC)-Support">Mass Storage Device Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Mixer-Support">Mixer Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Mixer-Types">Mixer Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Multirotor-Spazzing-Out">Multicopter Spazzing Out?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/OSD-Font-Upload-Problem">OSD Font Upload Problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/OSD-and-CMS-Adjusting-Screen">OSD &amp; CMS Adjusting Screen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/PID-Tuning-Guide">PID Tuning Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Paralyze-for-Team-Races">Paralyze For Team Races</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Pinio-and-PinioBox">Pinio &amp; PinioBox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Presets-in-BF-4.3">Presets 4.3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Quick-Start-for-Preset-Authors">Presets Quick Start for Authors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Rate-Calculator">Rate Calculator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Remapping-Motors-with-Resource-Command">Remapping Motors with Resource Command</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Resource-remapping">Resource Remapping Command</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Reversed-motor-direction">Running with reversed motors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/RunCam-Device-Protocol">RunCam Device Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Runaway-Takeoff-Prevention">Runaway Takeoff Prevention</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/SBus-FPort-and-RC-Smoothing-when-using-OpenTX">Problems with SBus and FPort when using OpenTX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Serial-BlackBox-Logging">Serial Blackbox Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Serial-Pass-Through">Serial Passthrough</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Servos-&amp;-SERVO_TILT-for-3.1">Servos &amp; Servo Tilt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Setup-for-a-Fixed-Wing-Aircraft">Setup for Fixed Wing Aircraft</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Single-Wire-Software-Serial">Single Wire Soft Serial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Single-wire-FlySky-(IBus)-telemetry">Single Wire FlySky IBUS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Soft-Mounting-and-Noise-Reduction">Soft Mounting and Noise Reduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Spektrum-Rx-setup">How to setup Spektrum Serial Receivers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Spektrum-SPM4649T-SRXL-Telemetry-setup">Howto setup Spektrum SPM4649T SRXL Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Spektrum-Satellite-Bind-for-3.2">Spektrum Satellite Bind 3.2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Spektrum-and-RC-Smoothing-Filter">Spektrum and RC Smooting Filter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Supported-Sensors">Supported Sensors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/TBS-Unify-Smartaudio">TBS Unify Smartaudio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Tuning-Dynamic-Idle">Tuning Dynamic Idle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Tuning-Tips-for-Betaflight-3.4">Tuning Tips for BF 3.4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Unified-Targets">Unified Targets for users</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/VTX-CLI-Settings">VTX CLI Settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/VTX-Tables">VTX Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive/Yaw-Spin-Recovery-and-Gyro-Overflow-Detect">Yaw Spin Recovery and Gyro Overflow Detect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/support/archive">archive</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/boards">Boards</a><button aria-label="Expand sidebar category &#x27;Boards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/configurator">Configurator</a><button aria-label="Expand sidebar category &#x27;Configurator&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/misc">Misc</a><button aria-label="Expand sidebar category &#x27;Misc&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/archive"><span itemprop="name">Archive</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Magnetometer / Compass</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Magnetometer / Compass</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>These notes only apply to Magnetometers in Betaflight 4.5 or higher</p><p>Do <strong>NOT</strong> use a magnetometer unless you have confirmed that:</p><ul>
<li>the magnetometer&#x27;s axes are correctly oriented</li>
<li>the calibration is accurate</li>
<li>the returned values are clean and noise-free</li>
<li>the correct local declination angle is entered in the CLI</li>
<li>the heading returned by the mag is correct</li>
<li>Acc is enabled, correctly oriented, and calibrated</li>
<li>GPS is included in the firmware, and enabled, to see the heading data</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The purpose of a magnetometer is to return the &#x27;heading&#x27; of the quad, meaning the direction the nose of the quad is pointing in. More precisely, we want the angle in degrees between the nose of the quad and &quot;true North&quot;. When set up correctly, the returned value should, for example, be 90 degrees when the nose of the quad is pointing due East, 180 degrees when pointing due South, etc.</p>
<p>Mag information is essential for position hold, which we intend to support, and improves behaviour in GPS Rescue.</p>
<p>GPS Rescue will have improved eading control if reliable, accurate Mag information is available, especially during ascents and descents on windy days.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<ul>
<li>please read <em>all</em> of this document before using a magnetometer (3D compass)</li>
<li>the firmware must be custom built to include Mag support</li>
<li>the magnetometer must power up at the same time as the flight controller</li>
<li>the CLI <code>status</code> command must show the correct hardware as being connected</li>
<li>the magnetometer must be oriented correctly, and the orientation must be checked</li>
<li>the magnetometer must be calibrated accurately</li>
<li>the user must set the local declination angle in the CLI</li>
<li>the user must confirm that the reported heading is correct while in flight, from mag alone</li>
<li>the user must get GPS Rescue working properly, without Mag, before enabling the Mag</li>
<li>the user must make careful tests of GPS Rescue when adding Mag. With Mag, the initial rotation/climb phase, and the descent phase, should show more accurate heading control, especially in windy conditions. If it makes no difference to the rescue, or causes problems, don&#x27;t use it.</li>
</ul>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>DO NOT enable Mag if you rely on GPS rescue, until you are ABSOLUTELY CERTAIN that the Mag data is accurate and reliable!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="magnetometer-explanation">What is a Magnetometer?<a href="#magnetometer-explanation" class="hash-link" aria-label="Direct link to What is a Magnetometer?" title="Direct link to What is a Magnetometer?">​</a></h2>
<p>A magnetometer is a three-axis device that detects the local strength and direction of the <a href="https://en.wikipedia.org/wiki/Earth%27s_magnetic_field" target="_blank" rel="noopener noreferrer">earth&#x27;s magnetic field</a><sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>.</p>
<p>Magnetometer sensors output data on three mutually perpendicular axes: X, Y and Z. The relative relationship between the three axes is typically as follows: if Z is up, and X is forward, Y points left. This is true for the popular QMC5883L. However, some magnetometers orient the axes differently.</p>
<p>For most Mag modules, if the magnetometer has arrows indicating the direction of the X and Y axes on the board, the direction of the Z axis most likely will be:</p>
<ul>
<li>upwards, if the Y axis is 90° to the left of X axis, or</li>
<li>downwards, if the Y axis is 90° to the right of the X axis</li>
</ul>
<p>When one of the Mag sensor&#x27;s three axes points directly parallel to a magnetic field line, that axis returns its most positive value, and the other two axes return zero. Conversely, when pointing into the opposite direction, the axis returns its most negative value, and the other two axes return zero. This is how the user can determine the orietnation of the axes in their module.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The orientation of the magnetometer on the quad is very important. In Betaflight, the data from the magnetometer must be returned as follows:</p><ul>
<li>X must point <strong>forward</strong></li>
<li>Y must point <strong>left</strong></li>
<li>Z must point <strong>up</strong></li>
</ul><p>Always use the Sensors tab to confirm that the sensor orientation is correct. If the Mag is an IST8310, its non-compliant Y axis orientation must be corrected with a custom configuration that rotates the Y axis by 180 degrees.</p></div></div>
<figure class="align-center"><img src="/assets/images/MagOrientationDiagram-d516836ac044366916bb637c1a7807a8.png" alt="Figure of magnetometer axes and orientation" class="no-effect"><figcaption><p><b>Fig. 1</b> - Magnetometer axes and orientation in relation to the drone as expected by Betaflight</p></figcaption><br></figure>
<p>In most standalone modules, such as the GY-271 board, the sensor is soldered on the top of the board, and typically the Z axis points upwards. In most GPS modules, the sensor is mounted upside-down, and the Z axis points downwards. The sensor can be soldered with it&#x27;s X axis faces forward, or 180 degrees backwards, or left, or right. Hence the orientation of the axes varies greatly from module to module.</p>
<p>The orientation of the axis also varies according to the orientation of the module when it is attached to the quadcopter.</p>
<p>If the magnetometer cannot be physically positioned so that its axes are aligned as per the diagram above, the <code>Mag alignment</code> setting in Configurator (<code>align_mag</code> in the <a href="/docs/support/configurator/cli-tab">CLI</a>) may be used to correct for other mag orientations. Standard corrections (e.g. <code>CW90</code> to rotate the axes 90 degrees clockwise) are provided for common alignment problems. If the module is tilted backwards, or at an unusual angle, a <code>custom</code> orientation correction will be required.</p>
<p>The correct orientation of a given axis should be confirmed by checking the Magnetometer data in the Sensors tab.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-earths-magnetic-field">About the Earth&#x27;s Magnetic Field<a href="#about-the-earths-magnetic-field" class="hash-link" aria-label="Direct link to About the Earth&#x27;s Magnetic Field" title="Direct link to About the Earth&#x27;s Magnetic Field">​</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Earth%27s_magnetic_field" target="_blank" rel="noopener noreferrer">The earth&#x27;s magnetic field</a><sup><a href="#user-content-fn-1" id="user-content-fnref-1-2" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> is not uniform. Its field lines usually point a few degrees away from geographic North and either down (in the Northern Hemisphere) or up (in the Southern Hemisphere). Both the field direction and strength vary from place to place.</p>
<p>The earth&#x27;s magnetic field is usually represented in a <strong>NED</strong> (north-east-down) frame of reference. This means that the X axis of the earth&#x27;s field points North, the Y axis points East, and the Z axis points Down. This representation is not at all relevant for Betaflight&#x27;s mag orientation, but may be useful when interpreting the magnetic field strength and direction values reported for your location.</p>
<p>The absolute strength of the field is measured in Gauss, or milliTeslas, where 1.0 Gauss = 0.1 milliTesla. In my location, the field strength is approximately 0.57 Gauss. Betaflight&#x27;s sensors tab shows the values reported by the sensor, and these depend on the sensor gain, which can be found in the specification sheet. For example, the QMC5883L returns a value of 3000 for a field strength of 1 Gauss, so that in Sydney I would expect to get a value 1710 when that sensor, after calibration, was aligned directly into the field.</p>
<p>When we measure the magnetic field at a particular point on earth, we are measuring a local field vector which usually points a few degrees away from geographic North, and either down into the ground in the Northern Hemisphere, or up out of the ground in the Southern Hemisphere. There are considerable angular deviations, especially in the up or down angle, depending upon where you are on the surface of the Earth.</p>
<p>The sideways deviation of the Earth&#x27;s magnetic field from the geographic north is called the <strong>magnetic declination</strong>. It is measured in degrees, with positive values meaning that the magnetic North is to the East of the geographic North.</p>
<p>The angle at which the field points into (or out of) the Earth&#x27;s surface is called the <strong>magnetic inclination</strong>, or <strong>magnetic dip</strong>. See <a href="https://physicsmax.com/inclination-dip-7371" target="_blank" rel="noopener noreferrer">physicsmax.com</a><sup><a href="#user-content-fn-2" id="user-content-fnref-2" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup> for a nice explanation and graphic. Inclination is measured in degrees &#x27;into&#x27; the ground. In the Northern Hemisphere the Earth&#x27;s magnetic field points down into the ground (positive inclination values), and in the Southern Hemisphere it points up into the sky (negative inclination values).</p>
<p>Local declination and inclination values are available from online sources such as <a href="https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml" target="_blank" rel="noopener noreferrer">NOAA</a><sup><a href="#user-content-fn-3" id="user-content-fnref-3" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>, or via clickable map at sites like <a href="https://www.magnetic-declination.com" target="_blank" rel="noopener noreferrer">magnetic-declination.com</a><sup><a href="#user-content-fn-4" id="user-content-fnref-4" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>.</p>
<p>As an example, in Sydney, Australia, 34 degrees South and 151 degrees East, the Earth&#x27;s magnetic field is 13 degrees east of the geographic North, and points out of the ground, steeply upwards, at 65 degrees. With a properly calibrated and correctly oriented Mag, a maximallly positive value on the Mag X axis should be seen in the Sensors tab, and close to zero on the Y and Z axes, when the nose of my quad is pointed 13 degrees East of North, and 65 degrees up.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-local-declination-in-the-cli">Setting local declination in the CLI<a href="#setting-local-declination-in-the-cli" class="hash-link" aria-label="Direct link to Setting local declination in the CLI" title="Direct link to Setting local declination in the CLI">​</a></h2>
<p>In Betaflight 4.5, the CLI variable <code>mag_declination</code> was introduced, to correct for declination offsets. When correctly set, Betaflight will return &quot;true North&quot;, not &quot;magnetic North&quot;, and will match the GPS course over ground values, which are returned relative to true North. Declination values should be entered in decidegrees; in the above example, <code>set mag_declination = 130</code> would correct for a 13 degree positive declination. A negative local declination, eg -3 degrees, should be entered as <code>set mag_declination = 3570</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-and-connection">Hardware and Connection<a href="#hardware-and-connection" class="hash-link" aria-label="Direct link to Hardware and Connection" title="Direct link to Hardware and Connection">​</a></h2>
<p>Betaflight&#x27;s build system must include <code>Magnetometers</code>, from the dropdown in the cloud build, or <code>-DUSE_MAG</code> for local builds, otherwise there will be no Mag support in the firmware. Additionally, GPS firmware should be included in the build, because we display the Mag heading on Configurator&#x27;s GPS tab, and use GPS debugs to display the Mag heading information.</p>
<p>Betaflight provides drivers for the following magnetometers, but not all have been validated to work with Betaflight 4.5 at the time of writing:</p>
<ul>
<li><a href="https://datasheet.lcsc.com/szlcsc/QST-QMC5883L-TR_C192585.pdf" target="_blank" rel="noopener noreferrer">QMC5883L</a><sup><a href="#user-content-fn-8" id="user-content-fnref-8" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup>. The QMC5883L is provided on the common, and cheap, GY-217 module, and many GPS units. It provides a 200Hz data update rate, 8x sample averaging and 3000 LSB/Gauss sensitivity. Standard axis orientation. We recommend using this mag if it is an option for your build, because it&#x27;s performance has been validated during testing - we know it works well.</li>
<li><a href="https://intofpv.com/attachment.php?aid=8104" target="_blank" rel="noopener noreferrer">IST8310</a><sup><a href="#user-content-fn-9" id="user-content-fnref-9" data-footnote-ref="true" aria-describedby="footnote-label">6</a></sup> Note that this gyro has a highly unusual axis orientation, with Y to the <em>right</em> when X is forward and Z is up, and will <em>always</em> require a custom axis orientation in the CLI. Data update rate is 160Hz with 16x sample averaging and 330 LSB/Gauss sensitivity.</li>
<li><a href="https://www.st.com/resource/en/datasheet/lis3mdl.pdf" target="_blank" rel="noopener noreferrer">STM&#x27;s LIS3MDL</a><sup><a href="#user-content-fn-10" id="user-content-fnref-10" data-footnote-ref="true" aria-describedby="footnote-label">7</a></sup> This mag is integral to a combined Gyro, Acc and Mag &#x27;9 axis&#x27; chip from STM. Standard axis orientation.</li>
<li><a href="https://cdn-shop.adafruit.com/datasheets/HMC5883L_3-Axis_Digital_Compass_IC.pdf" target="_blank" rel="noopener noreferrer">HMC5883L</a><sup><a href="#user-content-fn-7" id="user-content-fnref-7" data-footnote-ref="true" aria-describedby="footnote-label">8</a></sup> ODR is 75Hz with 1090 LSB/Gauss sensitivity; discontinued and replaced by the QMC6883L. Standard axis orientation. Validated.</li>
<li>Deprecated: <a href="https://www.alldatasheet.com/datasheet-pdf/pdf/535561/AKM/AK8963.html" target="_blank" rel="noopener noreferrer">AK8963</a><sup><a href="#user-content-fn-5" id="user-content-fnref-5" data-footnote-ref="true" aria-describedby="footnote-label">9</a></sup> and <a href="https://www.alldatasheet.com/datasheet-pdf/pdf/535562/AKM/AK8975.html" target="_blank" rel="noopener noreferrer">AK8975</a><sup><a href="#user-content-fn-6" id="user-content-fnref-6" data-footnote-ref="true" aria-describedby="footnote-label">10</a></sup>, (both discontinued; some versions have Z up, others down, all return standard axis orientation when mounted with X forward).</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The AK8963 and AK8975 driver code is deprecated in Betaflight 4.5, and will be removed at some point. These Mags, or may not, work with Betaflight 4.5. No developers have these units, so we can&#x27;t test them. Please take particular care when using 4.5 with these Mag units. Confirm that the Mag task does not cause issues with other i2c devices, and that the data from these units is usable. We strongly recommend using a current Mag like the QMC5883L.</p></div></div>
<p>The user can use<code>set mag_hardware = AUTO</code> in CLI, which is the default, and Betaflight will automatically identify a connected and supported Mag.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Magnetometer detection takes place on power up. Make sure that the Mag powers up at the same time as the FC.</p></div></div>
<p>The magnetometer is usually connected via i2C. Wire up the SCL and SDA pins on the module to the pins of the same name on the FC, and power the module with either 5V or 3.3V depending its requirements.</p>
<p>When connected by i2C, the following CLI settings are needed:</p>
<ul>
<li><code>set mag_bustype = I2C</code></li>
<li><code>set mag_i2c_address = 0</code> (automatically determine from the connected Mag)</li>
<li><code>set mag_i2c_device = 1</code> (always 1, not sure why)</li>
</ul>
<p>When the firmware is built with Mag support, the Accelerometer enabled, and a supported Magnetometer is wired up properly, Mag can be enabled in the Configurator&#x27;s System Configuration tab, and saved. From that point:</p>
<ul>
<li>the Mag hardware icon at the top (N with triangle above it) will illuminate</li>
<li>Mag Alignment settings are available in the top right of the Configuration tab in Configurator</li>
<li>in the Sensors tab, enabling Magnetometer at the top will display the current X, Y and Z magnetometer values</li>
<li>the <code>status</code> command in CLI will show the detected Mag hardware</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The Accelerometer must always be enabled when using a Mag, to correct the heading estimate for pitch or roll variations!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="magnetometer-mounting-and-orientation">Magnetometer Mounting and Orientation<a href="#magnetometer-mounting-and-orientation" class="hash-link" aria-label="Direct link to Magnetometer Mounting and Orientation" title="Direct link to Magnetometer Mounting and Orientation">​</a></h2>
<p>As noted previously, Betaflight expects that, with respect to <em>both</em> the Accelerometer, and the frame of the quad, the magnetic field information matches the following requirements:</p>
<ul>
<li>X axis functionally points forward,</li>
<li>Y axis functionally points left, and</li>
<li>Z axis functionally points up.</li>
</ul>
<p>If this is not the case, the Mag data will be useless, and could cause a GPS rescue to fail. Software adjustments may be required to get the &#x27;orientation-corrected&#x27; Mag axes and &#x27;orientation-corrected&#x27; Accelerometer axes to match the orientation of the frame.</p>
<p>A stand-alone external Mag module that can be mounted anywhere on the quad, eg a GY-271, is best mounted:</p>
<ul>
<li>centrally</li>
<li>in the same plane of the FC, usually meaning both are &#x27;flat to the quad&#x27;</li>
<li>as far as possible, away from motors and other metallic onjects, or high-current wires</li>
<li>with the X axis pointing forward, directly to the nose of the quad, Y left and Z up</li>
</ul>
<p>If the Mag is part of your GPS module, the above requirements also apply. It&#x27;s definitely easier if the GPS is flat to the quad, otherwise you&#x27;ll need to figure how to enter the correct custom alignment settings. Also note that the Mag sensor may be inverted, or in an unknown orientation, as explained <a href="#magnetometer-explanation">above</a>.</p>
<p>No matter how it is mounted, is absolutely essential to confirm proper orientation of the Mag before using it!</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>When the Mag orientation (alignment) is correct, the &#x27;quad&#x27; icon in the Home screen of Configurator should move smoothly and appropriately as the quad is rotated, pitched and rolled. Note that when the quad&#x27;s attitude is changed very quickly, the heading will initially react quickly on the basis of Gyro and Acc data, and then over the next half second it will be adjusted by the Mag. If the orientation of the Mag data axes is wrong, or the calibration is way off, then these movements will be jerky or completely wrong.</p></div></div>
<p>If the orientation is known to be correct, ie X forward etc, because you can see the orientation markings on the board or have confirmed them by checking the little dot on the sensor, then the default or <code>CW0</code> alignment should be correct. Even so, do the checks noted below.</p>
<p>If you&#x27;re unsure of the axis orientation, or if you know the Mag is rotated, or upside down, the <code>Mag alignment</code> setting in Configurator (<code>align_mag</code> in CLI) will need to be configured properly:</p>
<ul>
<li>if the mag is upright but rotated 90 degrees right, choose <code>CW90</code>, etc</li>
<li>if the mag is inverted, choose one of the &#x27;flip&#x27; options.</li>
<li>if the mag is at a custom angle, choose <code>CUSTOM</code> orientation, and enter adjustment values in decidegrees in the CLI.</li>
</ul>
<p>Note that &#x27;flip&#x27; functionally rotates the Mag 180 degrees around the Y axis. You pretty much have to experiment with each possible orientation and check each of them until you find one that works. For the HMC5883L/QMC5883L, <a href="https://intofpv.com/t-betaflight-internals-coordinate-system?pid=55575#pid55575" target="_blank" rel="noopener noreferrer">this post</a><sup><a href="#user-content-fn-11" id="user-content-fnref-11" data-footnote-ref="true" aria-describedby="footnote-label">11</a></sup> shows a &#x27;cheat sheet&#x27; that may help, but only if the chip itself is visible.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-magnetometer-orientation-using-configurators-sensors-tab">Checking Magnetometer Orientation using Configurator&#x27;s Sensors Tab<a href="#checking-magnetometer-orientation-using-configurators-sensors-tab" class="hash-link" aria-label="Direct link to Checking Magnetometer Orientation using Configurator&#x27;s Sensors Tab" title="Direct link to Checking Magnetometer Orientation using Configurator&#x27;s Sensors Tab">​</a></h3>
<p>The Sensors Tab shows the current X, Y and Z Mag field strength values as detected by the sensor. This information can be used to confirm the correct orientation of the Mag sensor, and to confirm the calibration.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Before checking orientation, the sensor must first be calibrated!<br>
<!-- -->This initial calibration does not have to be perfect, but it must be done.</p></div></div>
<p>When a particular axis is perfectly aligned with the local magnetic field, the other two axes will show zero, or very close to zero. If the value shown is positive, that axis is pointing towards the North of the magnetic field. If negative, it&#x27;s pointing South.</p>
<p>We can use this fact to check the orientation of the Mag after it is attached to the quadcopter. It&#x27;s best to do this well away from large ferrous metal objects, eg out in an open field or something like that.</p>
<p>We need to know the &#x27;north&#x27; direction of the Earth&#x27;s magnetic field, approximately, at our location, so that we can point the nose of the quad kind of directly parallel to that magnetic field line when we go looking at the data returned by our Mag.</p>
<p>First, get your phone out, open the Compass settings, and configure it to return Magnetic North (not &quot;true&quot; North). Then open the Compass app, and mark a line on the bench or ground that points to Magnetic North/South.</p>
<p>Then look up your local Inclination value. If you&#x27;re in the Northern Hemisphere, you&#x27;ll be pointing the nose of the quad downwards at that angle into the ground, along the North/South magnetic line, when testing the X axis of your sensor. If you&#x27;re in the Southern Hemisphere, you&#x27;ll be pointing at that angle up into the sky.</p>
<p>Then hook the quad up to Configurator, check the Sensors tab, point the nose of the quad as best possible directly into the magnetic field.</p>
<p>If everything is perfect, you should see a large, positive value in the X axis, and smaller, close to zero values in the Y and Z axes. With a bit of adjustment of the angle of the quad, you should be able to get the Y and Z axes really close to zero. If you figure that the nose of the quad looks like it&#x27;s pointing North, and at the correct angle to the Horizon, and if X is by far the biggest number, then the X axis is aligned correctly!</p>
<p>Then turn the quad 90 degrees right, pointing the &#x27;left side&#x27; of the quad, where the Y axis of the sensor should be, directly to Magnetic North. If all is good, the Y axis data will be a big number and X and Z close to zero.</p>
<p>Finally, hold the quad so that the top of it is pointing directly into the magnetic field vector. By now you should have a good idea where that is. Z should then have a strongly positive value while X and Y should be close to zero.</p>
<p>Complex as this process seems, it is the only way to be 100% sure that the Mag is oriented correctly.</p>
<p>If you do not get the expected outcome, a software correction for the orientation of the Magnetometer will be required. Keep trying until it works properly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-corrections-for-unusual-magnetometer-orientations">Software Corrections for Unusual Magnetometer Orientations<a href="#software-corrections-for-unusual-magnetometer-orientations" class="hash-link" aria-label="Direct link to Software Corrections for Unusual Magnetometer Orientations" title="Direct link to Software Corrections for Unusual Magnetometer Orientations">​</a></h3>
<p>To get these corrections right, you must know the direction of the magnetic field lines in your test environment. The mag must have been calibrated at some point before fixing the orientation.</p>
<p>The goal is to achieve the following result in the Sensors tab, when the specified part of the quad is pointed directly parallel to the field lines:</p>
<hr>
<table><thead><tr><th>Frame part parallel to field lines</th><th>X axis</th><th>Y axis</th><th>Z axis</th></tr></thead><tbody><tr><td>Nose</td><td>Maximum</td><td>0</td><td>0</td></tr><tr><td>Left side</td><td>0</td><td>Maximum</td><td>0</td></tr><tr><td>Top</td><td>0</td><td>0</td><td>Maximum</td></tr></tbody></table>
<hr>
<p>Usually it&#x27;s best to do initial tests with the mag mounted flat and square to the frame, in the position you&#x27;d like it to be. If the mag is in a GPS, and you plan to pitch the GPS back a bit, worry about the tilt later; keep it flat for now.</p>
<p>A good plan is to first check the Z axis. Confirm that it returns a strongly positive number when the top of the quad points directly into to the &#x27;North&#x27; of the local field lines. If you get a strongly negative value, the sensor is mounted upside down. You should apply the <code>CW0_DEG_FLIP</code> correction at this point, and then move on to check X and Y.</p>
<p>To check X, move the quad around until you get a positive value on X, and then make smaller adjustments until you see a maximum on X and a zero on Y and Z. Let&#x27;s say this happens when the right side of the quad is pointing directly parallel to the field lines. That means the X axis is pointing to the right of the quad, i.e. that the sensor is rotated 90 degrees clockwise. The appropriate correction, assuming Z pointed UP, would be <code>CW90</code>. If the Z axis pointed down, you&#x27;d need <code>CW90_FLIP</code>.</p>
<p>Each time you try a different software orientation, re-test by pointing the nose into to the field lines, looking for a max on X, then check that Y is max when the left side points parallel to the field lines, and finally check that Z is max when the top of the quad points parallel to the field lines. Once you get that, you&#x27;re done. Unless you intend to tilt the Mag a bit, that is.</p>
<p>If the Mag is a separate module, it is definitely easiest if it is mounted flat on the quad, with X forward and Z up, if at all possible.</p>
<p>If the Mag is in a GPS, and you want to pitch the GPS backwards at say 30 degrees an additional 30 degree correction will be required, that will also pitch the Mag backwards at 30 degrees.</p>
<p>Unfortunately, this means that the simple, standard <code>CW0</code> type corrections cannot be used. You will need to enable custom mag alignment, with <code>set align_mag = custom</code> in CLI. Then a value must be entered for each axis that requires correction, using, for example, <code>set mag_align_pitch = 300</code>, which compensates for a 30 degree pitch alignment problem.</p>
<p>It&#x27;s probably best to:</p>
<ul>
<li>first determine the standard correction that works when the module is flat to the frame</li>
<li>convert that to a set of custom corrections, in degrees, for each axis</li>
<li>figure out what final change is required to correct for the pitch offset of the module.</li>
</ul>
<p>Here are some examples:</p>
<p>If the module requires no correction, i.e. it works perfectly, with X forward and Z up as expected in the CW0 or default orientation while flat, and then if it is pitched backwards 30 degrees, <code>set align_mag = custom</code> and <code>set mag_align_pitch = 300</code> should fix it.</p>
<p>If the module requires a <code>CW90</code> correction while flat, then the combination of <code>set align_mag = custom</code>, <code>set mag_align_yaw = 900</code> and <code>set mag_align_roll = -300</code> will fix the module being pitched backwards 90 degrees. The correction is required on roll since the sensor is logically rotated 90 degrees.</p>
<p>A module which requires a <code>CW90FLIP</code> correction, and is then pitched back 30 degrees, would require <code>set align_mag = custom</code>, <code>set mag_align_pitch = 1800</code>, <code>set mag_align_yaw = 900</code> and <code>set mag_align_roll = 300</code>.</p>
<p>Note that if the board is rotated 90 degrees, corrections for pitch must be done using roll.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="magnetometer-calibration">Magnetometer Calibration<a href="#magnetometer-calibration" class="hash-link" aria-label="Direct link to Magnetometer Calibration" title="Direct link to Magnetometer Calibration">​</a></h2>
<p>For accurate heading readings, accurate calibration is essential.</p>
<p>Calibration &#x27;zeroes out&#x27; local magnetic fields arising from nearby ferrous objects on the quad, such as nearby circuit board components, and any inherent offsets in the sensor.</p>
<p>The calibration process can be initiated while connected to Configurator, or by using stick commands.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In Betaflight 4.5, the frame must be &#x27;tapped&#x27; quite hard, within 15s of initiating the calibration process, to start acquiring data. Once the data acquisition phase commences, the LED stops flashing. Data will be acquired over the next 30s and used to calibrate the sensor.</p></div></div>
<p>The &#x27;centre&#x27; or &#x27;cal&#x27; value for an axis is typically a value midway between the min and max values detected for that axis. It is then is subtracted from every reading, centering all readings on that axis around zero. Once the cal value is applied, the reported maximum (most positive) and minimum (most negative) values, for each axis, should be equal in value, but opposite in sign.</p>
<p>Cal values are saved in the <code>mag_calibration</code> CLI parameter. For example, <code>set mag_calibration = 35,-130,-75</code> will cause the heading code to subtract 35 from every X reading, add 130 to every Y reading, and add 75 ro every Z reading.</p>
<p>For the most accurate calibration results:</p>
<ul>
<li>calibrate the quad at, or close to, the intended flight location</li>
<li>while calibrating, keep well away from external metallic or magnetic objects</li>
<li>do several runs, and confirm that the cal values are consistent each time</li>
<li>(expert only) validate that absolute min and max readings are equal on each axis</li>
<li>consider removing the motors</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Magnetic interference from nearby motors can affect calibration very badly. If the motors are turned slowly, and you see twitching of the quad icon on the main Configurator page, significant changes in the Mag heading value, or twitches in the Mag data in the sensors tab, you may have a problem. In flight, these offsets should average out, but during calibration, they will not, and it&#x27;s likely that you&#x27;ll bump the motors while twisting it around during the cal process. This can lead to strangely different cal values on repeated testing, no matter how careful you are. The further away the motors are, and the further above or below the plane of the motors, the less of a problem this is. On some quads the only way to get an accurate Mag cal is to remove the motors.</p></div></div>
<p>Calibration values, once acquired, typically do not need to be changed much within your local area. They may require updating or checking if you intend to fly a long way from home.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Calibration itself <strong>DOES NOT</strong> check that the orientation of the sensor is correct!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calibration-initiation">Calibration Initiation<a href="#calibration-initiation" class="hash-link" aria-label="Direct link to Calibration Initiation" title="Direct link to Calibration Initiation">​</a></h3>
<p>The quad must be disarmed. There are two ways to initiate the calibration process:</p>
<ul>
<li>clicking the <code>Calibrate Magnetometer</code> button in Configurator, keeping connected with a long USB cable.</li>
<li>using stick commands on the radio (be absolutely sure that the quad is disarmed!):<!-- -->
<ul>
<li>right stick straight dowm (pitch low with roll centred)</li>
<li>left stick in the top right corner (throttle high and yaw fully right)</li>
</ul>
</li>
<li>you then have 15s in which to &#x27;tap the frame&#x27; hard, which starts the calibration process itself</li>
</ul>
<p>Once the calibration process is activated, the LED on the FC stops flashing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calibration-technique">Calibration Technique<a href="#calibration-technique" class="hash-link" aria-label="Direct link to Calibration Technique" title="Direct link to Calibration Technique">​</a></h3>
<p>It&#x27;s best to record your previous calibration values before re-calibrating, especially if they were OK. This can be done with a Preset&gt;Save command.</p>
<p>After initiating a calibration you have 15s to get ready to move the quad around. When you&#x27;re ready to start moving the frame, tap the arm of the frame quite hard, to make a big spike in the gyro signal. The calibration count-down commences, and the status LED stops flashing. You now have 30s in which to move the quad so that all the magnetometer axes point to all the possible points of the magnetic field.</p>
<p>A good way to cover every possible angle is to:</p>
<ul>
<li>hold the quad by the battery</li>
<li>swing your arm around in a big circle, eg forwards -&gt; up -&gt;over -&gt; backwards -&gt; downwards, and keep swinging it around like this</li>
<li>yaw the quad, randomly, left and right, at the same time</li>
<li>slowly rotate your whole body about its vertical axis by taking small steps, so that in 30s you have completed a full 360 degree rotation.</li>
</ul>
<p>If you know the local field direction, you may start and finish facing North, though this is not necessary.</p>
<p>Smoothly completing full rotations about every 1.5-2 seconds works best, but keep in mind that you only have 30s.</p>
<p>Check the <code>mag_calibration</code> CLI numbers after each run to see how consistent the values are. If each value is within 50 units of the last couple of runs, that&#x27;s pretty good. Also check in the Sensors Tab that the Min and Max for each axis are approximately the same number.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Take great care not to initiate a Mag Cal accidentally! If you &#x27;tap&#x27; the frame, but fail to rotate the quad properly after a Cal starts, your old cal values will be lost, and the Mag data will be useless!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-axis-calibration">Single-axis calibration<a href="#single-axis-calibration" class="hash-link" aria-label="Direct link to Single-axis calibration" title="Direct link to Single-axis calibration">​</a></h3>
<p>It&#x27;s possible to do a &#x27;manual&#x27; calibration &#x27;one axis at a time&#x27;. This is not the normal or recommended method, but can be used to check the cal value for a particular axis.</p>
<p>For example, if we want to get an accurate cal value for the X axis, we can point the nose in the general direction of Magnetic North, and move it randomly around while keeping it generally pointing in the North field vector. Note that both the inclination and declination angles must be considered. This requires knowing the local declination and inclination angles. The idea is to get lots of values that are close to magnetic North, so that at least some are &#x27;spot on&#x27;. The nose should be pointed directly North for some 12-13s, then the quad should be reversed 180 degrees, pointing the tail of the quad directly into the field, and moving it around a bit, for the same period of time.</p>
<p>If we are connected to the Sensors tab, we should see the X axis being close to maximum, and the other two axes close to zero, when the nose is pointing directly into the field. Conversely, it should show the most negative value when the tail points directly into the field.</p>
<p>The resulting cal value for X can be returned with <code>get mag_calibration</code> the CLI; the first value is the X cal value. Record that value. Repeat the process to be sure the X cal value is reliable. Then repeat separately for the Y and Z axes, until you have all three cal values. Then you can type in the cal value for each axis into the CLI in the form <code>set mag_calibration = X,Y,Z</code>.</p>
<p>Normally the method of swinging the arm as it rotates works very well, returning a calibration value for all three axes in one calibration run.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validating-the-heading-using-a-mobile-phone">Validating the Heading using a mobile phone.<a href="#validating-the-heading-using-a-mobile-phone" class="hash-link" aria-label="Direct link to Validating the Heading using a mobile phone." title="Direct link to Validating the Heading using a mobile phone.">​</a></h3>
<p>The heading value can be checked against a mobile phone. Ensure that the mobile phone is set to display true North, not magnetic north, and be sure that your local declination value has been entered into the CLI. Point the quad due North, using your phone to determine North. The heading value on the front page of Configurator, or in the goggles, should read close to 0 / 360 when pointing due North.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fine-tuning-calibration-in-sensors-tab">Fine-tuning Calibration in Sensors Tab.<a href="#fine-tuning-calibration-in-sensors-tab" class="hash-link" aria-label="Direct link to Fine-tuning Calibration in Sensors Tab." title="Direct link to Fine-tuning Calibration in Sensors Tab.">​</a></h3>
<p>For a well-calibrated Mag, the highest and lowest values, for any individual axis, when the values on the other two axes are close to zero, should be numerically equal.</p>
<p>Using the sensors tab to check max and min values for each axis can also validate the accuracy of the existing calibration when flying in a new location. If max and min are very similar, when the other two axes are zero, you don&#x27;t need to recalibrate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="where-is-heading-information-displayed">Where is heading information displayed?<a href="#where-is-heading-information-displayed" class="hash-link" aria-label="Direct link to Where is heading information displayed?" title="Direct link to Where is heading information displayed?">​</a></h2>
<p>Heading information is provided to the quad by the GPS unit (course over ground), the IMU (gyro information while turning quickly), and the Mag unit. The IMU code uses &#x27;sensor fusion&#x27; methods to integrate the available data to a final &#x27;attitude&#x27; or &#x27;heading&#x27; value for the quad.</p>
<p>The current Heading is shown shown on the main front screen of Configurator, at the top left of the quad icon area. If Mag is enabled, the heading shown reflects Mag data, and will return a value indicating the angle of the nose of the quad relative to North. Without a mag, the heading value always starts at 0 or 359 degrees, and only changes because integral of the gyro data can be used to indicate a relative change in yaw since arming.</p>
<p>If the code is built with GPS support, both the current Mag heading and the GPS course over ground heading are shown in Configurator&#x27;s GPS tab.</p>
<p>In the OSD, heading can be shown as numerical values in degrees, or indicated graphically.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If everything is working properly, the quad&#x27;s icon, as shown in the main page of Configurator, should move without sudden jumps, once Mag is enabled. Sudden jumps after quick movements usually mean that the orientation is not correct.</p></div></div>
<p>If GPS working properly, and GPS Rescue enabled in the Failsafe tab, heading information from Mag can be logged in Debug 4 of the <code>GPS_RESCUE_HEADING</code> debug.</p>
<p>MagADC X, Y and Z values are always logged to Blackbox, and should be examined after an initial flight to ensure they are not really noisy. The noise should be much less than the signal. If noise is obviously an issue, mount the mag further away from the motors, and away from high-current wires, ensuring that the sensor is equidistant from pairs of motors, and check that there is adequate filtering on the power supply to the Mag module.</p>
<p><em>Drafted by <strong>ctzsnooze</strong> in 2023-09 for Betaflight 4.5. Huge shout out to <strong>ledvinap</strong> and <strong>pichim</strong> for their help and guidance.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="external-links">External Links<a href="#external-links" class="hash-link" aria-label="Direct link to External Links" title="Direct link to External Links">​</a></h2>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-1">
<p><a href="https://en.wikipedia.org/wiki/Earth%27s_magnetic_field" target="_blank" rel="noopener noreferrer">Earth&#x27;s Magnetic Field - Wikipedia</a> <a href="#user-content-fnref-1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a> <a href="#user-content-fnref-1-2" data-footnote-backref="" aria-label="Back to reference 1-2" class="data-footnote-backref">↩<sup>2</sup></a></p>
</li>
<li id="user-content-fn-2">
<p><a href="https://physicsmax.com/inclination-dip-7371" target="_blank" rel="noopener noreferrer">Inclination or Dip - PhysicsMax</a> <a href="#user-content-fnref-2" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-3">
<p><a href="https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml" target="_blank" rel="noopener noreferrer">Magnetic Field Calculators - NOAA</a> <a href="#user-content-fnref-3" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-4">
<p><a href="https://www.magnetic-declination.com" target="_blank" rel="noopener noreferrer">Inclination and Declination map</a> <a href="#user-content-fnref-4" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-8">
<p><a href="https://datasheet.lcsc.com/szlcsc/QST-QMC5883L-TR_C192585.pdf" target="_blank" rel="noopener noreferrer">QMC5883L datasheet</a> <a href="#user-content-fnref-8" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-9">
<p><a href="https://intofpv.com/attachment.php?aid=8104" target="_blank" rel="noopener noreferrer">IST8310 datasheet</a> <a href="#user-content-fnref-9" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-10">
<p><a href="https://www.st.com/resource/en/datasheet/lis3mdl.pdf" target="_blank" rel="noopener noreferrer">LIS3MDL datasheet</a> <a href="#user-content-fnref-10" data-footnote-backref="" aria-label="Back to reference 7" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-7">
<p><a href="https://cdn-shop.adafruit.com/datasheets/HMC5883L_3-Axis_Digital_Compass_IC.pdf" target="_blank" rel="noopener noreferrer">HMC5883L datasheet</a> <a href="#user-content-fnref-7" data-footnote-backref="" aria-label="Back to reference 8" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-5">
<p><a href="https://www.alldatasheet.com/datasheet-pdf/pdf/535561/AKM/AK8963.html" target="_blank" rel="noopener noreferrer">AK8963 datasheet (disccontinued)</a> <a href="#user-content-fnref-5" data-footnote-backref="" aria-label="Back to reference 9" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-6">
<p><a href="https://www.alldatasheet.com/datasheet-pdf/pdf/535562/AKM/AK8975.html" target="_blank" rel="noopener noreferrer">AK8975 datasheet (discontinued)</a> <a href="#user-content-fnref-6" data-footnote-backref="" aria-label="Back to reference 10" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-11">
<p><a href="https://intofpv.com/t-betaflight-internals-coordinate-system?pid=55575#pid55575" target="_blank" rel="noopener noreferrer">HMC5883L/QMC5883L cheat sheet</a> <a href="#user-content-fnref-11" data-footnote-backref="" aria-label="Back to reference 11" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/support/archive/Launch-Control"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Launch Control</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/support/archive/Mass-Storage-Device-(MSC)-Support"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mass Storage Device Support</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#magnetometer-explanation" class="table-of-contents__link toc-highlight">What is a Magnetometer?</a></li><li><a href="#about-the-earths-magnetic-field" class="table-of-contents__link toc-highlight">About the Earth&#39;s Magnetic Field</a></li><li><a href="#setting-local-declination-in-the-cli" class="table-of-contents__link toc-highlight">Setting local declination in the CLI</a></li><li><a href="#hardware-and-connection" class="table-of-contents__link toc-highlight">Hardware and Connection</a></li><li><a href="#magnetometer-mounting-and-orientation" class="table-of-contents__link toc-highlight">Magnetometer Mounting and Orientation</a><ul><li><a href="#checking-magnetometer-orientation-using-configurators-sensors-tab" class="table-of-contents__link toc-highlight">Checking Magnetometer Orientation using Configurator&#39;s Sensors Tab</a></li><li><a href="#software-corrections-for-unusual-magnetometer-orientations" class="table-of-contents__link toc-highlight">Software Corrections for Unusual Magnetometer Orientations</a></li></ul></li><li><a href="#magnetometer-calibration" class="table-of-contents__link toc-highlight">Magnetometer Calibration</a><ul><li><a href="#calibration-initiation" class="table-of-contents__link toc-highlight">Calibration Initiation</a></li><li><a href="#calibration-technique" class="table-of-contents__link toc-highlight">Calibration Technique</a></li><li><a href="#single-axis-calibration" class="table-of-contents__link toc-highlight">Single-axis calibration</a></li><li><a href="#validating-the-heading-using-a-mobile-phone" class="table-of-contents__link toc-highlight">Validating the Heading using a mobile phone.</a></li><li><a href="#fine-tuning-calibration-in-sensors-tab" class="table-of-contents__link toc-highlight">Fine-tuning Calibration in Sensors Tab.</a></li></ul></li><li><a href="#where-is-heading-information-displayed" class="table-of-contents__link toc-highlight">Where is heading information displayed?</a></li><li><a href="#external-links" class="table-of-contents__link toc-highlight">External Links</a></li></ul></div></div></div></div></main></div></div></div><footer class="p-16 w-full bg-neutral-500/5 shadow-[0_20px_30px_0] shadow-black"><div class="text-center"><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div><div class="font-bold text-primary-500 mb-1">Youtube</div><ul class="flex flex-col items-center"><li><a href="https://www.youtube.com/channel/UCX3eufnI7A2I7IkKHZn8KSQ" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="youtube" class="svg-inline--fa fa-youtube" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></div>Joshua Bardwell</a></li><li><a href="https://www.youtube.com/channel/UCQtdpSBYlsWH6_m1Us_d8dg" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="youtube" class="svg-inline--fa fa-youtube" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></div>Ivan Efimov</a></li></ul></div><div><div class="font-bold text-primary-500 mb-1">Links</div><ul class="flex flex-col items-center"><li><a href="https://oscarliang.com/" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="globe" class="svg-inline--fa fa-globe" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"></path></svg></div>Oscar Liang</a></li><li><a href="https://www.vitroidfpv.com/" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="globe" class="svg-inline--fa fa-globe" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"></path></svg></div>VitroidFPV</a></li></ul></div><div><div class="font-bold text-primary-500 mb-1">Community</div><ul class="flex flex-col items-center"><li><a href="https://discord.betaflight.com/invite" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="discord" class="svg-inline--fa fa-discord" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></div>Discord</a></li><li><a href="https://intofpv.com/" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="comments" class="svg-inline--fa fa-comments" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M208 352c114.9 0 208-78.8 208-176S322.9 0 208 0S0 78.8 0 176c0 38.6 14.7 74.3 39.6 103.4c-3.5 9.4-8.7 17.7-14.2 24.7c-4.8 6.2-9.7 11-13.3 14.3c-1.8 1.6-3.3 2.9-4.3 3.7c-.5 .4-.9 .7-1.1 .8l-.2 .2 0 0 0 0C1 327.2-1.4 334.4 .8 340.9S9.1 352 16 352c21.8 0 43.8-5.6 62.1-12.5c9.2-3.5 17.8-7.4 25.3-11.4C134.1 343.3 169.8 352 208 352zM448 176c0 112.3-99.1 196.9-216.5 207C255.8 457.4 336.4 512 432 512c38.2 0 73.9-8.7 104.7-23.9c7.5 4 16 7.9 25.2 11.4c18.3 6.9 40.3 12.5 62.1 12.5c6.9 0 13.1-4.5 15.2-11.1c2.1-6.6-.2-13.8-5.8-17.9l0 0 0 0-.2-.2c-.2-.2-.6-.4-1.1-.8c-1-.8-2.5-2-4.3-3.7c-3.6-3.3-8.5-8.1-13.3-14.3c-5.5-7-10.7-15.4-14.2-24.7c24.9-29 39.6-64.7 39.6-103.4c0-92.8-84.9-168.9-192.6-175.5c.4 5.1 .6 10.3 .6 15.5z"></path></svg></div>IntoFPV</a></li></ul></div><div><div class="font-bold text-primary-500 mb-1">More</div><ul class="flex flex-col items-center"><li><a class="fancy-link pb-1 no-underline flex" href="/blog"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="blog" class="svg-inline--fa fa-blog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"></path></svg></div>Blog</a></li><li><a href="https://github.com/betaflight/betaflight" target="_blank" rel="noopener noreferrer" class="fancy-link pb-1 no-underline flex"><div class="w-[24px] self-center"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></div>GitHub</a></li></ul></div></div></div><div class="text-center"><svg baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" width="201.7" height="159.2" viewBox="0 0 201.7 159.2" xml:space="preserve" class="w-36 h-36 mr-12 mt-4 inline-block opacity-10"><path fill="#FFF" d="M159.8 125.4c-15.2-6.4-26-15.9-36.9-20 5.7-2.5 11-6.1 14.3-9.2 3.6-3.4 4.7-7.7 4.5-11.8 11.3 7.7 24.7 8.2 31.5 8.6 7.1.4 13.8 1.8 15.2 5.2 0 0 2.2-38.4-76.9-63.9 0 0 23.6 10.7 31 19.3 0 0-8.4-.5-11.9 4.9-1.8 2.7-2.2 6.9-.6 11.5-1.3-.2-2.8-.4-4.4-.5L0 0l13.2 28.4L.8 24.1l3.7 7c.1.1 5.2 10 17.3 31.1 9.5 16.6 26.5 24.9 49 23.9.8 0 1.8-.1 2.8-.2 5.7-.4 14.5-1.2 23-2-.6 3.1-.5 6.8.3 11.3 1 5.2 3.1 8.5 5.8 10.6-6.7 3.2-12.8 9.4-15.5 16.8-1.9 4.6-2.4 10.2-.1 16.7v.1c.5 1.3 1 2.6 1.8 4 .7 1.3 1.6 2.6 2.7 3.7 14 16.6 48 13.9 69.4 4.9.3-.1.6-.2.9-.4 1.7-.7 3.4-1.5 5.1-2.3.3-.2.7-.3 1-.5 1.8-.9 3.6-1.8 5.4-2.9 21.3-12.4 28.3-26.9 28.3-26.9s-21.3 15.1-41.9 6.4zm5.4-57c6 2.6 15.3 17.6 15.3 17.6-7.7-1.2-23.1-6.2-24.7-12s3.4-8.3 9.4-5.6zm-19.8 74.4s1.6 5-.3 11.5c-2.1.6-4.4 1.1-6.7 1.5 3.7-2.8 7-7 7-13zM41.7 46.7l54.5 31c-10 1-20.6 1.9-25.9 2.2-8.1.4-15.4-.6-21.8-2.8C39.2 73.8 32 67.8 27 59.2c-6.2-10.8-10.5-18.7-13.3-23.8L25 39.3 13.7 15l99.1 55c-2.7.4-5.4 1.2-7.8 2.4L41.7 46.7zm57.9 38.7c3.9-18.4 27.5-12.6 27.5-12.6-8.6-.2-13.6 2.2-16.1 5.6-3.7 5.1.9 9 .9 9-1.3-.2-2.4-.6-3.2-1.2v.2c2 7.1 7.8 9 7.8 9-2.2.3-4.1.2-5.7-.2 1.3 3 3 5.2 4.2 5.7-5.2 0-7.9 1.2-9.9 2-4.1-2.8-7.2-9.5-5.5-17.5zm16.2 40.3s-8.6 10.7-27 10.7c-1.1-4.2-.7-8.4.3-12.1 5.8 3.8 14.6 6 26.7 1.4zm-15.6 24.9c7.9-1.8 18-6.2 27.6-17.1 0 0-1.1 11.8-10 23-4-.5-8.1-1.5-12-3.1-2-.8-3.9-1.8-5.6-2.8zm74.4-9.6c-1.1-2.9-1.6-8.7-1.6-8.7 6.6.6 14.6-2.1 14.6-2.1-5.3 6.5-13 10.8-13 10.8z"></path></svg><div class="footer__copyright">Copyright © 2023 All rights reserved Team Betaflight</div><div class="mt-1 text-sm text-neutral-500/60">Built with Docusaurus</div><div class="mt-1 text-sm text-neutral-500/60">made with <span class="text-red-500">❤️</span> by<!-- --> <a class="font-bold hover:text-emerald-500 no-underline duration-300" href="https://github.com/vitroidfpv">VitroidFPV</a> <!-- -->and<!-- --> <a class="font-bold hover:text-sky-400 no-underline duration-300" href="https://github.com/freasy">un!t</a></div></div></footer></div>
</body>
</html>